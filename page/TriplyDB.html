<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" xml:lang="en-us">
<head>
<!-- 2019-05-07 Tue 10:32 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TriplyDB Documentation</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Wouter Beek" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">TriplyDB Documentation</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgf4e784b">1. Creating datasets</a>
<ul>
<li><a href="#org086d13a">1.1. Creating a new dataset</a></li>
<li><a href="#orge10efc3">1.2. Adding data</a>
<ul>
<li><a href="#org24bd734">1.2.1. Adding data by file upload</a></li>
<li><a href="#org6b2fc23">1.2.2. Adding data by URL upload</a></li>
<li><a href="#orge79c09a">1.2.3. Adding data by import</a></li>
</ul>
</li>
<li><a href="#org8dc048d">1.3. Entering metadata</a></li>
<li><a href="#org61179d4">1.4. Starting services</a>
<ul>
<li><a href="#orgad621f1">1.4.1. Existing services</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgefae17c">2. Tabular browser</a>
<ul>
<li><a href="#org9054bfe">2.1. Triple Pattern Fragments (TPF)</a>
<ul>
<li><a href="#org4c51c50">2.1.1. URI path</a></li>
<li><a href="#org0657afd">2.1.2. Reply format</a></li>
<li><a href="#org9392638">2.1.3. Query parameters</a></li>
<li><a href="#org0d6ef45">2.1.4. Example request</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org78b688c">3. SPARQL IDE</a>
<ul>
<li><a href="#org4bfd6ef">3.1. SPARQL Editor</a>
<ul>
<li><a href="#org8d60ba0">3.1.1. Supported key combinations</a></li>
</ul>
</li>
<li><a href="#orgea276f6">3.2. SPARQL Templates</a></li>
<li><a href="#orgadea33d">3.3. SPARQL Table</a>
<ul>
<li><a href="#org2647337">3.3.1. Features</a></li>
<li><a href="#orgab77ca3">3.3.2. Example</a></li>
</ul>
</li>
<li><a href="#org70b98d0">3.4. SPARQL Gallery</a>
<ul>
<li><a href="#org697166b">3.4.1. Variables</a></li>
<li><a href="#orgdab9b06">3.4.2. Styling</a></li>
<li><a href="#org0773a2b">3.4.3. Example</a></li>
</ul>
</li>
<li><a href="#org8cdbc8c">3.5. SPARQL 2D Map</a>
<ul>
<li><a href="#orga11df8b">3.5.1. Variables</a></li>
</ul>
</li>
<li><a href="#orge1f321c">3.6. SPARQL 3D Map</a>
<ul>
<li><a href="#org318d48b">3.6.1. Variables</a></li>
</ul>
</li>
<li><a href="#orgc41828a">3.7. SPARQL Charts</a></li>
<li><a href="#orgf9bf94d">3.8. TreeMap</a></li>
<li><a href="#org0d5fefa">3.9. SPARQL Pivot Table</a></li>
<li><a href="#orga25b27d">3.10. SPARQL Raw View</a></li>
</ul>
</li>
<li><a href="#org79eee2d">4. Data Stories</a>
<ul>
<li><a href="#org224e3ce">4.1. Markup language declaration</a></li>
<li><a href="#orgd48ab70">4.2. Main natural language declaration</a></li>
<li><a href="#org0ae8a14">4.3. Encoding declaration</a></li>
<li><a href="#orgeb7a076">4.4. Metadata</a></li>
<li><a href="#org6adce90">4.5. Navigation bar</a></li>
<li><a href="#org4109a68">4.6. External links</a></li>
<li><a href="#org59ba795">4.7. HTML elements</a>
<ul>
<li><a href="#org0b8ce89">4.7.1. story element</a></li>
<li><a href="#org028ff52">4.7.2. query element</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgbdd4e8f">5. Text search</a>
<ul>
<li><a href="#orgcf1e148">5.1. Text search GUI</a></li>
<li><a href="#org59768bd">5.2. Text search API</a>
<ul>
<li><a href="#org12c19de">5.2.1. URI path</a></li>
<li><a href="#org2b6542c">5.2.2. Reply format</a></li>
<li><a href="#org8d209aa">5.2.3. Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orga94b5d8">6. REST API</a>
<ul>
<li><a href="#org0d30cc5">6.1. Datasets</a></li>
<li><a href="#org4555505">6.2. Services</a></li>
<li><a href="#orgdb7de1c">6.3. Authentication</a>
<ul>
<li><a href="#org9d7d632">6.3.1. Creating an API token</a></li>
<li><a href="#orgf053d5b">6.3.2. Using the API token</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgfe6aa23">7. Admin tasks</a>
<ul>
<li><a href="#org1dffe95">7.1. Create a new user</a></li>
<li><a href="#orgfbfdff3">7.2. Account overview</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
<a id="orga2a50f5"></a>
<a id="org63247f9"></a>
</p>

<p>
This document describes the TriplyDB product.  This document is a
work-in-process.  Contact <a href="mailto:support@triply.cc">support@triply.cc</a> for more information.
</p>

<div id="outline-container-orgf4e784b" class="outline-2">
<h2 id="orgf4e784b"><span class="section-number-2">1</span> Creating datasets</h2>
<div class="outline-text-2" id="text-1">
<p>
This section explains how to create a Linked Dataset in TriplyDB.
This includes setting the access level, uploading RDF data, setting
metadata, and starting services.
</p>
</div>

<div id="outline-container-org086d13a" class="outline-3">
<h3 id="org086d13a"><span class="section-number-3">1.1</span> Creating a new dataset</h3>
<div class="outline-text-3" id="text-1-1">
<ol class="org-ol">
<li>Log into a TriplyDB instance.</li>

<li>Click the plus button on the dataset pane that appears on the
right-hand side of the screen (see screenshot).</li>

<li>This brings up the dialog for creating a new dataset.  You must
enter a dataset name that consists of alphanumeric characters
[A-Za-z0-9] and hyphens (-).</li>

<li>Optionally enter a dataset description.  This can be either test
or Markdown.  You can also change the access level of the
dataset, which is set to “Private” by default.</li>
</ol>


<div id="org00bd075" class="figure">
<p><img src="https://wouterbeek.github.io/resource/img/triply/add-dataset-dialog.png" alt="add-dataset-dialog.png" />
</p>
<p><span class="figure-number">Figure 1: </span>The “Add dataset” dialog.</p>
</div>
</div>
</div>

<div id="outline-container-orge10efc3" class="outline-3">
<h3 id="orge10efc3"><span class="section-number-3">1.2</span> Adding data</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Once the dataset is created, the “Add data” view is displayed (see
screenshot).  In this view data can be added in three ways: file
upload, URL upload, and data import.  The following screenshot shows
the “Add data” view, with the three approaches displayed on top of one
another.
</p>


<div id="org54378cd" class="figure">
<p><img src="https://wouterbeek.github.io/resource/img/triply/add-data.png" alt="add-data.png" />
</p>
<p><span class="figure-number">Figure 2: </span>The “Add data” view.</p>
</div>
</div>

<div id="outline-container-org24bd734" class="outline-4">
<h4 id="org24bd734"><span class="section-number-4">1.2.1</span> Adding data by file upload</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
In this view RDF files can be uploaded, either by
clicking on the cloud icon and selecting files through the “Open file”
dialog, or by dragging-and-dropping files onto the cloud icon.  The
following RDF serialization formats are supported:
</p>

<ul class="org-ul">
<li>N-Quads 1.1, file name extension <code>nq</code>.</li>
<li>N-Triples 1.1, file name extension <code>nt</code>.</li>
<li>RDF/XML 1.1, file name extension <code>rdf</code>.</li>
<li>TriG, file name extension <code>trig</code>.</li>
<li>Turtle 1.1, file name extension <code>ttl</code>.</li>
</ul>

<p>
One or more files can be uploaded.  It is also possible to upload
compressed files and archives.  When the number of files exceeds
1.000, it is better to upload one archive file that contains them all.
This allows an arbitrary number of files to be uploaded.
</p>
</div>

<ol class="org-ol">
<li><a id="org871caf4"></a>Adding malformed data<br />
<div class="outline-text-5" id="text-1-2-1-1">
<p>
TriplyDB only allows valid data to be added.  If data is malformed,
TriplyDB will show an error message that indicates which part of the
data is malformed (see screenshot).  If such malformed data is
encountered, the RDF file must first be corrected and uploaded again.
</p>


<div id="org37ec889" class="figure">
<p><img src="https:/wouterbeek.github.io/resource/img/triply/upload-error.png" alt="upload-error.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Screenshot of an error message indicating syntactically malformed RDF data.</p>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org6b2fc23" class="outline-4">
<h4 id="org6b2fc23"><span class="section-number-4">1.2.2</span> Adding data by URL upload</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
The second option for adding data is to include it from an online URL
location.  This is done by entering the URL inside the “Add data from
a URL” text field.
</p>
</div>
</div>

<div id="outline-container-orge79c09a" class="outline-4">
<h4 id="orge79c09a"><span class="section-number-4">1.2.3</span> Adding data by import</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
The third option for adding data is to import from datasets that are
published in the same TriplyDB instance.  This is done with the “Add
data from an existing dataset” dropdown list (see screenshot).
</p>
</div>
</div>
</div>

<div id="outline-container-org8dc048d" class="outline-3">
<h3 id="org8dc048d"><span class="section-number-3">1.3</span> Entering metadata</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Adding metadata to your datasets is important.  This makes it easier
to find your dataset later and also allows search engines and social
media applications to understand your dataset.
</p>

<p>
Metadata is entered from the dataset settings page, which is accessed
by clicking on the “Dataset settings” (cog icon) option from the
left-hand sidebar (see screenshot).
</p>


<div id="org7c17339" class="figure">
<p><img src="https://wouterbeek.github.io/resource/img/triply/cog-wheel.png" alt="cog-wheel.png" />
</p>
<p><span class="figure-number">Figure 4: </span>The dataset homepage looks empty without metadata.  Notice the cog wheel icon, which provides access to the “Dataset settings” page.</p>
</div>

<p>
The dataset settings page allows the following metadata to be entered:
</p>

<ul class="org-ul">
<li>The dataset description.  This can consist of text with (optional)
Markdown formatting.</li>
<li>The avatar (image) of the dataset.</li>
<li>The access level of the dataset.</li>
<li>The topics of the dataset.</li>
<li>The example resources for the dataset.</li>
<li>The license of the dataset.</li>
</ul>


<div id="orgf32ee15" class="figure">
<p><img src="https://wouterbeek.github.io/resource/img/triply/dataset-settings-page.png" alt="dataset-settings-page.png" />
</p>
<p><span class="figure-number">Figure 5: </span>The dataset settings page allows valious forms of dataset metadata to be added.</p>
</div>

<p>
The same dataset looks nicer once metadata has been entered:
</p>


<div id="org7b27f7f" class="figure">
<p><img src="https://wouterbeek.github.io/resource/img/triply/dataset-homepage-with-metadata.png" alt="dataset-homepage-with-metadata.png" />
</p>
<p><span class="figure-number">Figure 6: </span>The dataset home page after metadata has been entered.</p>
</div>

<p>
Search engines and social media applications can recognize the
metadata that is entered for datasets in TriplyDB.  The following
screenshot shows the widget created by the Slack chat application upon
entering a link to the dataset.  Notice that the chay application
understands metadata properties like title, description, and image.
</p>


<div id="org9ca2e6d" class="figure">
<p><img src="https://wouterbeek.github.io/resource/img/triply/slack-widget.png" alt="slack-widget.png" />
</p>
<p><span class="figure-number">Figure 7: </span>Widget created by the Slack chat application upon sharing a link to a dataset in TriplyDB.</p>
</div>
</div>
</div>

<div id="outline-container-org61179d4" class="outline-3">
<h3 id="org61179d4"><span class="section-number-3">1.4</span> Starting services</h3>
<div class="outline-text-3" id="text-1-4">
<p>
By default, datasets in TriplyDB can be queried through the <a href="https://wouterbeek.github.io/page/TriplyClient.html">Triply
Client</a> as well as through the Linked Data Fragments API.
</p>

<p>
In order to allow additional query paradigms, specific services can be
started from the “Create service” page.  This page is accessed by
clicking on the “Services” icon in the left-hand sidebar (see
screenshot).
</p>

<p>
TriplyDB instances can be configured with different types of services.
The below screenshot shows the “Create service” page for a TriplyDB
instance that allows SPARQL, Jena SPARQL, and ElasticSearch services
to be created.
</p>

<p>
#+name create-service
<img src="https://wouterbeek.githun.io/resource/img/triply/create-service.png" alt="create-service.png" />
</p>

<p>
It is possible to create multiple services for one dataset.
</p>
</div>

<div id="outline-container-orgad621f1" class="outline-4">
<h4 id="orgad621f1"><span class="section-number-4">1.4.1</span> Existing services</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
Existing services are displayed on service widgets (see screenshot).
From these widgets, services can be created, deleted, stopped, and
restarted.
</p>

<p>
If data is added to and/or remove from the dataset later.  The service
can also be synchronized by pressing the synchronization button that
appears on the service widget.
</p>

<p>
#+name service-widget
<img src="https://wouterbeek.githun.io/resource/img/triply/service-widget.png" alt="service-widget.png" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgefae17c" class="outline-2">
<h2 id="orgefae17c"><span class="section-number-2">2</span> Tabular browser</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org9054bfe" class="outline-3">
<h3 id="org9054bfe"><span class="section-number-3">2.1</span> Triple Pattern Fragments (TPF)</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Triple Pattern Fragments (TPF) is a community standard that allows
individual Linked Datasets to be queries for Triply Patterns (TP), a
subset of the more complex SPARQL query language.  The Triply API
implements <a href="http://www.hydra-cg.com/spec/latest/triple-pattern-fragments/">Triple Pattern Fragments</a> version 2019-01-18 and <a href="http://www.hydra-cg.com/spec/latest/linked-data-fragments/">Linked Data
Fragments</a> version 2016-06-05.
</p>

<p>
The Triple Pattern Fragments (TPF) API is available for all datasets
in Triply and does not require running a dedicated service.
</p>
</div>

<div id="outline-container-org4c51c50" class="outline-4">
<h4 id="org4c51c50"><span class="section-number-4">2.1.1</span> URI path</h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
TPF requests are sent to the following URI path:
</p>

<div class="org-src-container">
<pre class="src src-uri">https://api.INSTANCE/datasets/ACCOUNT/DATATSET/fragments
</pre>
</div>
</div>
</div>

<div id="outline-container-org0657afd" class="outline-4">
<h4 id="org0657afd"><span class="section-number-4">2.1.2</span> Reply format</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
Since TPF replies distinguish between data and metadata that are
stored in different graphs, it is recommended to request the TriG
content type with the following HTTP request header:
</p>

<div class="org-src-container">
<pre class="src src-http"><span style="color: #BA36A5;">Accept</span><span style="color: #8D8D84; font-style: italic;">:</span> <span style="color: #008000;">application/trig</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9392638" class="outline-4">
<h4 id="org9392638"><span class="section-number-4">2.1.3</span> Query parameters</h4>
<div class="outline-text-4" id="text-2-1-3">
<p>
Triple Pattern Fragments (TPF) uses the following query parameters in
order to retrieve only those triples that adhere to a specified Triple
Pattern:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>Key</b></th>
<th scope="col" class="org-left"><b>Value</b></th>
<th scope="col" class="org-left"><b>Purpose</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>subject</code></td>
<td class="org-left">A URL-encoded IRI.</td>
<td class="org-left">Only return triples where the given IRI appears in the subject position.</td>
</tr>

<tr>
<td class="org-left"><code>predicate</code></td>
<td class="org-left">A URL-encoded IRI.</td>
<td class="org-left">Only return triples where the given IRI appears in the predicate position.</td>
</tr>

<tr>
<td class="org-left"><code>object</code></td>
<td class="org-left">A URL-encoded IRI or literal.</td>
<td class="org-left">Only return triples where the given IRI or literal appears in the object position.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org0d6ef45" class="outline-4">
<h4 id="org0d6ef45"><span class="section-number-4">2.1.4</span> Example request</h4>
<div class="outline-text-4" id="text-2-1-4">
<div class="org-src-container">
<pre class="src src-bash">$ curl -G <span style="color: #008000;">\</span>
       <span style="color: #008000;">'https://api.demo.triply.cc/datasets/academy/pokemon/fragments'</span> <span style="color: #008000;">\</span>
       --data-urlencode <span style="color: #008000;">'predicate=http://www.w3.org/2000/01/rdf-schema#label'</span> <span style="color: #008000;">\</span>
       -H <span style="color: #008000;">'Accept: application/trig'</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org78b688c" class="outline-2">
<h2 id="org78b688c"><span class="section-number-2">3</span> SPARQL IDE</h2>
<div class="outline-text-2" id="text-3">
<p>
This section explains the use of SPARQL in TriplyDB.  It provides
various advanced features for creating, sharing, and visualizing
SPARQL queries and their results.
</p>
</div>

<div id="outline-container-org4bfd6ef" class="outline-3">
<h3 id="org4bfd6ef"><span class="section-number-3">3.1</span> SPARQL Editor</h3>
<div class="outline-text-3" id="text-3-1">
</div>
<div id="outline-container-org8d60ba0" class="outline-4">
<h4 id="org8d60ba0"><span class="section-number-4">3.1.1</span> Supported key combinations</h4>
<div class="outline-text-4" id="text-3-1-1">
<p>
The following table enumerates the key combinations that are supported
by the SPARQL Editor.  We sometimes use the notion of a <b><b>group</b></b>,
which is either one word (space-delimited sequence of non-space
characters), a sequences of multiple whitespace characters, or one
newline.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b><b>Key combination</b></b></th>
<th scope="col" class="org-left"><b><b>Behavior</b></b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>Alt + Left</code></td>
<td class="org-left">Move the cursor to the beginning of the current line.</td>
</tr>

<tr>
<td class="org-left"><code>Alt + Right</code></td>
<td class="org-left">Move the cursor to the end of the current line.</td>
</tr>

<tr>
<td class="org-left"><code>Alt + U</code></td>
<td class="org-left">Redo the last change within the current selection.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + Backspace</code></td>
<td class="org-left">Delete to the beginning of the group before the cursor.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + Delete</code></td>
<td class="org-left">Delete to the beginning of the group after the cursor.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + End</code></td>
<td class="org-left">Move the cursor to the end of the query.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + Home</code></td>
<td class="org-left">Move the cursor to the start of the query.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + Left</code></td>
<td class="org-left">Move the cursor to the left of the group before the cursor.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + Right</code></td>
<td class="org-left">Move the cursor to the right of the group the cursor.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + [</code></td>
<td class="org-left">Decrements the indentation for the current line or the lines involved in the current selection.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + ]</code></td>
<td class="org-left">Increments the indentation for the current line or the lines involved in the current selection.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + /</code></td>
<td class="org-left">Toggles on/off the commenting of the current line or the lines involved in the current selection.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + A</code></td>
<td class="org-left">Select the whole query.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + D</code></td>
<td class="org-left">Deletes the current line or all lines involved in the current selection.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + U</code></td>
<td class="org-left">Undo the last change within the current selection.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + Y</code></td>
<td class="org-left">Redo the last undone edit action.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + Z</code></td>
<td class="org-left">Undo the last edit action.</td>
</tr>

<tr>
<td class="org-left"><code>Ctrl + Shift + F</code></td>
<td class="org-left">Auto-formats the whole query or the lines involved in the current selection.</td>
</tr>

<tr>
<td class="org-left"><code>Shift + Tab</code></td>
<td class="org-left">Auto-indents the current line or the lines involved in the current selection.</td>
</tr>

<tr>
<td class="org-left"><code>Tab</code></td>
<td class="org-left">Indents the current line or the lines involved in the current selection.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-orgea276f6" class="outline-3">
<h3 id="orgea276f6"><span class="section-number-3">3.2</span> SPARQL Templates</h3>
<div class="outline-text-3" id="text-3-2">
<p>
SPARQL has standardized capabilities for constructing complex strings
and literals.  This allows human-readable label and HTML widgets to be
generated from within SPARQL.  Unfortunately, the syntax for
constructing such labels and widgets is a bit cumbersome.
</p>

<p>
For example, the following SPARQL query returns HTML widgets that can
be displayed in a web browser (see <a href="#org70b98d0">3.4</a>).  It uses the
<code>concat</code> function which allows an arbitrary number of string arguments
to be concatenated into one string.  Notice that this requires
extensive quoting for each argument (e.g., <code>'&lt;h3&gt;'</code>), as well as
conversions from literals to strings (e.g., <code>str(?typeName)</code>).
Finally, in order to return an HTML literal we need to first bind the
concatenated string to some variable <code>?lex</code>, and then apply the
<code>strdt</code> function in order to construct a literal with datatype IRI
<code>rdf:HTML</code>.  You can <a href="https://demo.triply.cc/academy/pokemon/queries/sparql-html/2">try this query online</a>.
</p>

<div class="org-src-container">
<pre class="src src-sparql"><span style="color: #0000FF;">prefix</span> def: <span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">&lt;https://demo.triply.cc/academy/pokemon/def/&gt;</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">
</a><span style="color: #0000FF;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">prefix</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#"> foaf: </a><span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">&lt;http://xmlns.com/foaf/0.1/&gt;</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">
</a><span style="color: #0000FF;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">prefix</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#"> rdf: </a><span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">
</a><span style="color: #0000FF;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">prefix</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#"> rdfs: </a><span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</a></span>
<span style="color: #0000FF;">select</span> * {
  <span style="color: #BA36A5;">?pokemon</span>
    def:cry <span style="color: #BA36A5;">?cry</span>;
    def:type/rdfs:label <span style="color: #BA36A5;">?typeName</span>;
    foaf:depiction <span style="color: #BA36A5;">?image</span>;
    rdfs:label <span style="color: #BA36A5;">?name</span>.
  <span style="color: #0000FF;">bind</span>(concat(<span style="color: #008000;">'&lt;h3&gt;'</span>,str(<span style="color: #BA36A5;">?typeName</span>),<span style="color: #008000;">' &#12299; '</span>,str(<span style="color: #BA36A5;">?name</span>),<span style="color: #008000;">'&lt;/h3&gt;'</span>,
              <span style="color: #008000;">'&lt;img src="'</span>,str(<span style="color: #BA36A5;">?image</span>),<span style="color: #008000;">'"&gt;'</span>,
              <span style="color: #008000;">'&lt;audio controls src="'</span>,str(<span style="color: #BA36A5;">?cry</span>),<span style="color: #008000;">'"&gt;&lt;/audio&gt;'</span>) <span style="color: #0000FF;">as</span> <span style="color: #BA36A5;">?lex</span>)
  <span style="color: #0000FF;">bind</span>(strdt(<span style="color: #BA36A5;">?lex</span>,rdf:HTML) <span style="color: #0000FF;">as</span> <span style="color: #BA36A5;">?widget</span>)
}
<span style="color: #0000FF;">limit</span> 25
</pre>
</div>

<p>
The SPARQL Editor in TriplyDB supports SPARQL Templates, which makes
it easier to write human-readable labels and HTML widgets.  SPARQL
Templates are strings in which occurrences of <code>{{x}}</code> will be replaced
with the to-string converted results of bindings to SPARQL variable
<code>?x</code>.
</p>

<p>
The following example query produces the same result set as the above
one, but allows the entire HTML string to be written at once as a
SPARQL Template.  Notice that this removes the need for concatenating
(<code>concat/n</code>), explicit to-string conversion (<code>str/1</code>), and also allows
the HTML literal to be constructed more easily (no <code>strdt/2</code> needed).
You can <a href="https://demo.triply.cc/academy/pokemon/queries/sparql-templating/2">try this query online</a>.
</p>

<div class="org-src-container">
<pre class="src src-sparql"><span style="color: #0000FF;">prefix</span> def: <span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">&lt;https://demo.triply.cc/academy/pokemon/def/&gt;</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">
</a><span style="color: #0000FF;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">prefix</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#"> foaf: </a><span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">&lt;http://xmlns.com/foaf/0.1/&gt;</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">
</a><span style="color: #0000FF;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">prefix</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#"> rdf: </a><span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">
</a><span style="color: #0000FF;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">prefix</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#"> rdfs: </a><span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</a></span>
<span style="color: #0000FF;">select</span> * {
  <span style="color: #BA36A5;">?pokemon</span>
    def:cry <span style="color: #BA36A5;">?cry</span>;
    def:type/rdfs:label <span style="color: #BA36A5;">?typeName</span>;
    foaf:depiction <span style="color: #BA36A5;">?image</span>;
    rdfs:label <span style="color: #BA36A5;">?name</span>.
  <span style="color: #0000FF;">bind</span>(<span style="color: #008000;">'''</span>
<span style="color: #008000;">&lt;h3&gt;{{typeName}} &#12299; {{name}}&lt;/h3&gt;</span>
<span style="color: #008000;">&lt;img src="{{image}}"&gt;</span>
<span style="color: #008000;">&lt;audio controls src="{{cry}}"&gt;&lt;/audio&gt;'''</span>^^rdf:HTML <span style="color: #0000FF;">as</span> <span style="color: #BA36A5;">?widget</span>)
}
<span style="color: #0000FF;">limit</span> 25
</pre>
</div>

<p>
SPARQL Templates can be combined with the <a href="#org70b98d0">3.4</a> feauture in
order to generate galleries of HTML widgets.
</p>
</div>
</div>

<div id="outline-container-orgadea33d" class="outline-3">
<h3 id="orgadea33d"><span class="section-number-3">3.3</span> SPARQL Table</h3>
<div class="outline-text-3" id="text-3-3">
<p>
This view allows SPARQL results to be displayed in a table.  Each
column in the table corresponds to a variable that belongs to the
<a href="#org63247f9">No description for this link</a>.  Each row in the table corresponds to one query
result.  Each cell contains an RDF term or <code>NULL</code>.
</p>
</div>

<div id="outline-container-org2647337" class="outline-4">
<h4 id="org2647337"><span class="section-number-4">3.3.1</span> Features</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
In addition to displaying the SPARQL result set, the SPARQL Table has
the following features:
</p>
</div>

<ol class="org-ol">
<li><a id="orgac0adbc"></a>Abbreviations<br />
<div class="outline-text-5" id="text-3-3-1-1">
<p>
The SPARQL Table uses the prefix declarations in the SPARQL query in
order to abbreviate IRIs that appear in table cells.
</p>
</div>
</li>

<li><a id="org687c44c"></a>Filter<br />
<div class="outline-text-5" id="text-3-3-1-2">
<p>
By entering a search string into the “Filter query results” field, the
table will only display result rows in which the entered search string
appears.
</p>
</div>
</li>

<li><a id="org208bab9"></a>Indices<br />
<div class="outline-text-5" id="text-3-3-1-3">
<p>
The first column in the table indicates the index of each row in the
SPARQL result set.
</p>
</div>
</li>

<li><a id="orgfbf6206"></a>Pagination<br />
<div class="outline-text-5" id="text-3-3-1-4">
<p>
By default the Table displays at most 50 rows.  This maximum value can
be changed to 10, 100, 1.000, or “All”.
</p>
</div>
</li>

<li><a id="org32f34d8"></a>Sorting<br />
<div class="outline-text-5" id="text-3-3-1-5">
<p>
A sort widget appears to the right of each header label.  By pressing
on the upward pointing arrow of the sort widget, rows will be sorted
based on the lexicographic order of the values within the
corresponding column.  By pressing the downward pointing arrow of the
sort widget, rows will be inversely sorted according to the same
lexicographic order.
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-orgab77ca3" class="outline-4">
<h4 id="orgab77ca3"><span class="section-number-4">3.3.2</span> Example</h4>
<div class="outline-text-4" id="text-3-3-2">
<p>
The following SPARQL query returns a table of Pokémon dragons (column
<code>pokemon</code>) and their happiness (column <code>happiness</code>).  Notice that the
prefix for <code>id</code> is not used in the query, but is used in order to
abbreviate the IRI syntax in the <code>pokemon</code> column.  By clicking on the
sort widget next to the <code>happiness</code> header, the results can be
(inversely) sorted based on the happiness values.
</p>

<div class="org-src-container">
<pre class="src src-sparql"><span style="color: #0000FF;">prefix</span> def: <span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix id: &lt;https://demo.triply.cc/academy/pokemon/id/pokemon/&gt;
prefix type: &lt;https://triply.cc/academy/pokemon/id/type/">&lt;https://demo.triply.cc/academy/pokemon/def/&gt;</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix id: &lt;https://demo.triply.cc/academy/pokemon/id/pokemon/&gt;
prefix type: &lt;https://triply.cc/academy/pokemon/id/type/">
</a><span style="color: #0000FF;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix id: &lt;https://demo.triply.cc/academy/pokemon/id/pokemon/&gt;
prefix type: &lt;https://triply.cc/academy/pokemon/id/type/">prefix</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix id: &lt;https://demo.triply.cc/academy/pokemon/id/pokemon/&gt;
prefix type: &lt;https://triply.cc/academy/pokemon/id/type/"> id: </a><span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix id: &lt;https://demo.triply.cc/academy/pokemon/id/pokemon/&gt;
prefix type: &lt;https://triply.cc/academy/pokemon/id/type/">&lt;https://demo.triply.cc/academy/pokemon/id/pokemon/&gt;</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix id: &lt;https://demo.triply.cc/academy/pokemon/id/pokemon/&gt;
prefix type: &lt;https://triply.cc/academy/pokemon/id/type/">
</a><span style="color: #0000FF;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix id: &lt;https://demo.triply.cc/academy/pokemon/id/pokemon/&gt;
prefix type: &lt;https://triply.cc/academy/pokemon/id/type/">prefix</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix id: &lt;https://demo.triply.cc/academy/pokemon/id/pokemon/&gt;
prefix type: &lt;https://triply.cc/academy/pokemon/id/type/"> type: </a><span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix id: &lt;https://demo.triply.cc/academy/pokemon/id/pokemon/&gt;
prefix type: &lt;https://triply.cc/academy/pokemon/id/type/">&lt;https://triply.cc/academy/pokemon/id/type/&gt;</a></span>
<span style="color: #0000FF;">select</span> <span style="color: #BA36A5;">?pokemon</span> <span style="color: #BA36A5;">?happiness</span> {
  <span style="color: #BA36A5;">?pokemon</span>
    def:type type:dragon;
    def:happiness <span style="color: #BA36A5;">?happiness</span>.
}
</pre>
</div>
<p>
<a href="https://api.demo.triply.cc/s/0lhnUC9v9">Run this query online</a>
</p>


<div id="org6988d43" class="figure">
<p><img src="https://wouterbeek.github.io/resource/img/triply/sparql-table-example.png" alt="sparql-table-example.png" />
</p>
<p><span class="figure-number">Figure 8: </span>Screenshot of the SPARQL Table view over the above query.</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org70b98d0" class="outline-3">
<h3 id="org70b98d0"><span class="section-number-3">3.4</span> SPARQL Gallery</h3>
<div class="outline-text-3" id="text-3-4">
<p>
This view allows SPARQL results to be displayed in an HTML gallery.
Each individual result corresponds to one HTML widget.  Widgets are
displayed in rows and columns to make up a widget gallery.
</p>
</div>

<div id="outline-container-org697166b" class="outline-4">
<h4 id="org697166b"><span class="section-number-4">3.4.1</span> Variables</h4>
<div class="outline-text-4" id="text-3-4-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b><b>Variable name</b></b></th>
<th scope="col" class="org-left"><b><b>Purpose</b></b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>?widget</code></td>
<td class="org-left">A literal with datatype IRI <code>rdf:HTML</code>.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgdab9b06" class="outline-4">
<h4 id="orgdab9b06"><span class="section-number-4">3.4.2</span> Styling</h4>
<div class="outline-text-4" id="text-3-4-2">
<p>
Sometimes the cards do not have the required size.  In such cases the
following style tweaks can help to make them the right size:
</p>

<div class="org-src-container">
<pre class="src src-sparql"><span style="color: #0000FF;">bind</span>(<span style="color: #008000;">'''&lt;div style="max-height:unset; width:275px;"&gt;</span>
<span style="color: #008000;">  # The HTML that composes the widget goes here.</span>
<span style="color: #008000;">&lt;/div&gt;'''</span>^^rdf:HTML <span style="color: #0000FF;">as</span> <span style="color: #BA36A5;">?widget</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0773a2b" class="outline-4">
<h4 id="org0773a2b"><span class="section-number-4">3.4.3</span> Example</h4>
<div class="outline-text-4" id="text-3-4-3">
<p>
The following SPARQL query binds an HTML string consisting of a header
(<code>h3</code>), an image (<code>img</code>), and an audio element (<code>audio</code>) to the
<code>?widget</code> variable.  This results in a gallery with 25 widgets, each
displaying a Pokémon.  (This SPARQL query also uses <a href="#orgea276f6">3.2</a>
in order to simplify its syntax.)  This query can be <a href="https://demo.triply.cc/academy/pokemon/queries/gallery">run online</a>.
</p>


<div id="org6541ad7" class="figure">
<p><img src="https://wouterbeek.github.io/resource/img/triply/pok%C3%A9mon-gallery.png" alt="pok%C3%A9mon-gallery.png" />
</p>
<p><span class="figure-number">Figure 9: </span>SPARQL Gallery view of a Pokémon query that uses SPARQL Templating.</p>
</div>

<div class="org-src-container">
<pre class="src src-sparql"><span style="color: #0000FF;">prefix</span> def: <span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">&lt;https://demo.triply.cc/academy/pokemon/def/&gt;</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">
</a><span style="color: #0000FF;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">prefix</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#"> foaf: </a><span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">&lt;http://xmlns.com/foaf/0.1/&gt;</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">
</a><span style="color: #0000FF;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">prefix</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#"> rdf: </a><span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">
</a><span style="color: #0000FF;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">prefix</a></span><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#"> rdfs: </a><span style="color: #D0372D;"><a href="https://demo.triply.cc/academy/pokemon/def/&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#">&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</a></span>
<span style="color: #0000FF;">select</span> * {
  <span style="color: #BA36A5;">?pokemon</span> a def:Pokemon;
    def:baseAttack <span style="color: #BA36A5;">?attack</span>;
    def:baseDefense <span style="color: #BA36A5;">?defense</span>;
    def:baseExp <span style="color: #BA36A5;">?experience</span>;
    def:baseHP <span style="color: #BA36A5;">?health</span>;
    def:baseSpeed <span style="color: #BA36A5;">?speed</span>;
    def:cry <span style="color: #BA36A5;">?cry</span>;
    def:femaleRatio <span style="color: #BA36A5;">?female</span>;
    def:happiness <span style="color: #BA36A5;">?happiness</span>;
    def:maleRatio <span style="color: #BA36A5;">?male</span>;
    def:name <span style="color: #BA36A5;">?name</span>;
    foaf:depiction <span style="color: #BA36A5;">?image</span>;
    rdfs:label <span style="color: #BA36A5;">?label</span>.
  <span style="color: #0000FF;">filter</span>(langmatches(lang(<span style="color: #BA36A5;">?name</span>),<span style="color: #008000;">'ja'</span>))
  <span style="color: #0000FF;">bind</span>(<span style="color: #008000;">'''</span>
<span style="color: #008000;">&lt;h2&gt;{{name}} ({{label}})&lt;/h2&gt;</span>
<span style="color: #008000;">&lt;img src="{{image}}"&gt;</span>
<span style="color: #008000;">&lt;audio controls src="{{cry}}"&gt;&lt;/audio&gt;</span>
<span style="color: #008000;">&lt;ul&gt;</span>
<span style="color: #008000;">  &lt;li&gt;Experience: {{experience}}&lt;/li&gt;</span>
<span style="color: #008000;">  &lt;li&gt;Attack: {{attack}}&lt;/li&gt;</span>
<span style="color: #008000;">  &lt;li&gt;Defense: {{defense}}&lt;/li&gt;</span>
<span style="color: #008000;">  &lt;li&gt;Experience: {{experience}}&lt;/li&gt;</span>
<span style="color: #008000;">  &lt;li&gt;Health: {{health}}&lt;/li&gt;</span>
<span style="color: #008000;">  &lt;li&gt;Female ratio: {{female}}&lt;/li&gt;</span>
<span style="color: #008000;">  &lt;li&gt;Happiness: {{happiness}}&lt;/li&gt;</span>
<span style="color: #008000;">  &lt;li&gt;Male ratio: {{male}}&lt;/li&gt;</span>
<span style="color: #008000;">  &lt;li&gt;Speed: {{speed}}&lt;/li&gt;</span>
<span style="color: #008000;">&lt;/ul&gt;'''</span>^^rdf:HTML <span style="color: #0000FF;">as</span> <span style="color: #BA36A5;">?widget</span>)
}
<span style="color: #0000FF;">order</span> <span style="color: #0000FF;">by</span> <span style="color: #0000FF;">desc</span>(<span style="color: #BA36A5;">?experience</span>)
<span style="color: #0000FF;">limit</span> 20
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8cdbc8c" class="outline-3">
<h3 id="org8cdbc8c"><span class="section-number-3">3.5</span> SPARQL 2D Map</h3>
<div class="outline-text-3" id="text-3-5">
<p>
This view allows SPARQL results that contain GeoSPARQL semantics to be
automatically interpreted and displayed on a 2D map.
</p>
</div>

<div id="outline-container-orga11df8b" class="outline-4">
<h4 id="orga11df8b"><span class="section-number-4">3.5.1</span> Variables</h4>
<div class="outline-text-4" id="text-3-5-1">
<p>
This view recognizes the following SPARQL variable names:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b><b>Variable name</b></b></th>
<th scope="col" class="org-left"><b><b>Purpose</b></b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>?x</code></td>
<td class="org-left">An arbitrary variable name that is bound to literals with datatype IRI <code>geo:wktLiteral</code>, and whose name is the prefix of the other variable names in this table.</td>
</tr>

<tr>
<td class="org-left"><code>?xColor</code></td>
<td class="org-left">The color of the shape bound to <code>?x</code>.</td>
</tr>

<tr>
<td class="org-left"><code>?xLabel</code></td>
<td class="org-left">The text or HTML content of popups that appear when clicking the shape bound to <code>?x</code>.</td>
</tr>
</tbody>
</table>
</div>

<ol class="org-ol">
<li><a id="orga1cbcb9"></a>Color values<br />
<div class="outline-text-5" id="text-3-5-1-1">
<p>
Variable <code>?xColor</code> can bind values of the following types:
</p>
</div>

<ol class="org-ol">
<li><a id="org8dc7ee7"></a>CSS color names<br />
<div class="outline-text-6" id="text-3-5-1-1-1">
<p>
See <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value">MDN</a>.
</p>
</div>
</li>

<li><a id="org5de679e"></a>RGB color codes<br />
<div class="outline-text-6" id="text-3-5-1-1-2">
<p>
See <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value">MDN</a>.
</p>
</div>
</li>

<li><a id="org3ba615c"></a>HSL color codes<br />
<div class="outline-text-6" id="text-3-5-1-1-3">
<p>
See <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value">MDN</a>.
</p>
</div>
</li>

<li><a id="org24dc96f"></a>Gradients<br />
<div class="outline-text-6" id="text-3-5-1-1-4">
<p>
Strings of the form <code>{{PALETTE}},{{VALUE}}</code>, where <code>{{VALUE}}</code> is a
floating-point number between 0.0 and 1.0 and <code>{{PALETTE}}</code> is the
name of a color palette.  The following two libraries define the
supported color palette names:
</p>
</div>

<ol class="org-ol">
<li><a id="org453c15d"></a>colormap<br />
<div class="outline-text-7" id="text-3-5-1-1-4-1">
<p>
See <a href="https://www.npmjs.com/package/colormap">colormap</a>.
</p>
</div>
</li>

<li><a id="orgb815f57"></a>Color Brewer<br />
<div class="outline-text-7" id="text-3-5-1-1-4-2">
<p>
See <a href="http://colorbrewer2.org/#type=sequential&amp;scheme=BuGn&amp;n=3">Color Brewer</a>.
</p>
</div>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</div>

<div id="outline-container-orge1f321c" class="outline-3">
<h3 id="orge1f321c"><span class="section-number-3">3.6</span> SPARQL 3D Map</h3>
<div class="outline-text-3" id="text-3-6">
<p>
This view allows SPARQL results that contain GeoSPARQL semantics to be
automatically interpreted and displayed on a 3D map.
</p>

<p>
This view supports both 3D and 2.5D visualizations, depending on
whether the GeoSPARQL data is stored in native 3D or in 2D:
</p>

<dl class="org-dl">
<dt>3D</dt><dd>This requires shapes to be stored in literals with datatype
IRI <code>geo:wktLiteral</code> that contain three coordinates for each
point (longitude, latitude, and height).</dd>
<dt>2.5D</dt><dd>This only requires shapes to be stored in literals with
datatype IRI <code>geo:wktLiteral</code> that contain two coordinates
for each point (longitude and latitude).</dd>
</dl>
</div>

<div id="outline-container-org318d48b" class="outline-4">
<h4 id="org318d48b"><span class="section-number-4">3.6.1</span> Variables</h4>
<div class="outline-text-4" id="text-3-6-1">
<p>
This view recognizes the following SPARQL variable names:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b><b>Variable name</b></b></th>
<th scope="col" class="org-left"><b><b>Purpose</b></b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>?x</code></td>
<td class="org-left">An arbitrary variable name that is bound to 2D or 3D literals with datatype IRI <code>geo:wktLiteral</code>, and whose name is the prefix of the other variable names in this table.</td>
</tr>

<tr>
<td class="org-left"><code>?xColor</code></td>
<td class="org-left">The color of the shape bound to <code>?x</code>.</td>
</tr>

<tr>
<td class="org-left"><code>?xHeight</code></td>
<td class="org-left">The height in meters of the 2.5D shape that is based on the 2D shape that is bound to <code>?x</code>.  This variable is not needed if data is stored in native 3D.</td>
</tr>

<tr>
<td class="org-left"><code>?xLabel</code></td>
<td class="org-left">The textual or HTML content of the popups that appears when the shape that is bound to <code>?x</code> is clicked.</td>
</tr>

<tr>
<td class="org-left"><code>?xOffset</code></td>
<td class="org-left">The height in meters at which the 2.5D shape that is based on the 2D shape that is bound to <code>?x</code> starts.  This variable is not needed if data is stored in native 3D.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-orgc41828a" class="outline-3">
<h3 id="orgc41828a"><span class="section-number-3">3.7</span> SPARQL Charts</h3>
</div>

<div id="outline-container-orgf9bf94d" class="outline-3">
<h3 id="orgf9bf94d"><span class="section-number-3">3.8</span> TreeMap</h3>
<div class="outline-text-3" id="text-3-8">
<p>
The TreeMap view can be used to display hierarchies that are retrieved
using <code>select</code> queries.  The result set must consist of the following
columns (in this order):
</p>

<dl class="org-dl">
<dt><code>?node</code></dt><dd>The label of a tree node.</dd>
<dt><code>?parent</code></dt><dd>Either the label of the node that is the parent of
<code>?node</code>, or the value <code>UNDEF</code> in case <code>?node</code> is the
root node.</dd>
<dt><code>?size</code> (optional)</dt><dd>For leaf nodes, a positive integer
indicating the relative size of <code>?node</code>.</dd>
<dt><code>?color</code> (optional)</dt><dd>For leaf nodes, a double indicating the
relative color of <code>?node</code>.</dd>
</dl>

<p>
Once the TreeMap is drawn it is possible to navigate the tree with the
mouse: left clicking on a node will drill down into the corresponding
subtree; right clicking on a node will move up to the subtree of its
parent node.
</p>

<p>
Several configuration choices can be made in the configuration dialog,
including the number of levels that is displayed.
</p>

<p>
<b>Known Limitations</b>
</p>
</div>
</div>

<div id="outline-container-org0d5fefa" class="outline-3">
<h3 id="org0d5fefa"><span class="section-number-3">3.9</span> SPARQL Pivot Table</h3>
</div>
<div id="outline-container-orga25b27d" class="outline-3">
<h3 id="orga25b27d"><span class="section-number-3">3.10</span> SPARQL Raw View</h3>
</div>
</div>
<div id="outline-container-org79eee2d" class="outline-2">
<h2 id="org79eee2d"><span class="section-number-2">4</span> Data Stories</h2>
<div class="outline-text-2" id="text-4">
<p>
Data Stories allows a sequence of SPARQL queries to be published
within an HTML document.
</p>
</div>

<div id="outline-container-org224e3ce" class="outline-3">
<h3 id="org224e3ce"><span class="section-number-3">4.1</span> Markup language declaration</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Data Stories are written in HTML 5.  This is declared at the beginning
of the document:
</p>

<div class="org-src-container">
<pre class="src src-html"><span style="color: #008000;">&lt;!doctype html&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd48ab70" class="outline-3">
<h3 id="orgd48ab70"><span class="section-number-3">4.2</span> Main natural language declaration</h3>
<div class="outline-text-3" id="text-4-2">
<p>
The natural language in which most of the Data Story will be written
is declared in the <code>lang</code> attribute of the outer <code>html</code> tag:
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #006699;">html</span> <span style="color: #BA36A5;">lang</span>=<span style="color: #008000;">"en-us"</span>&gt;
  &#8230;
&lt;/<span style="color: #006699;">html</span>&gt;
</pre>
</div>

<p>
Specific (sub)sections of a Data Story that are written in another
main natural language must declare this on the corresponding tag.
</p>
</div>
</div>

<div id="outline-container-org0ae8a14" class="outline-3">
<h3 id="org0ae8a14"><span class="section-number-3">4.3</span> Encoding declaration</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Since Data Stories are encoded in UTF-8, this is declared at the
beginning of the <code>head</code> content:
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #006699;">head</span>&gt;
  &lt;<span style="color: #006699;">meta</span> <span style="color: #BA36A5;">charset</span>=<span style="color: #008000;">"utf-8"</span>&gt;
  &#8230;
&lt;/<span style="color: #006699;">head</span>&gt;
</pre>
</div>

<p>
Placement at the beginning of the <code>head</code> is required, since User
Agents may apply limited lookahead in order to determine the document
encoding.  Placing the encoding declaration later in the <code>head</code>
content may result in some User Agents not detecting it.
</p>
</div>
</div>

<div id="outline-container-orgeb7a076" class="outline-3">
<h3 id="orgeb7a076"><span class="section-number-3">4.4</span> Metadata</h3>
<div class="outline-text-3" id="text-4-4">
<p>
The <code>author</code> and <code>description</code> meta tags must both be supplied as
children of the <code>head</code> tag, and their content must be structured
according to the below template.  The <code>title</code> tag must have the same
content as the <code>description</code> meta tag.
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #006699;">head</span>&gt;
  &#8230;
  &lt;<span style="color: #006699;">meta</span> <span style="color: #BA36A5;">name</span>=<span style="color: #008000;">"author"</span> <span style="color: #BA36A5;">content</span>=<span style="color: #008000;">"{{FIRST-AUTHOR}}, {{SECOND-AUTHOR}}, &#8230;"</span>&gt;
  &lt;<span style="color: #006699;">meta</span> <span style="color: #BA36A5;">name</span>=<span style="color: #008000;">"description"</span> <span style="color: #BA36A5;">content</span>=<span style="color: #008000;">"{{INSTANCE}} Data Stories &#8213; {{STORY-TITLE}}"</span>&gt;
  &lt;<span style="color: #006699;">title</span>&gt;<span style="color: #000000; font-weight: bold; text-decoration: underline;">{{INSTANCE}} Data Stories &#8213; {{STORY-TITLE}}</span>&lt;/<span style="color: #006699;">title</span>&gt;
  &#8230;
&lt;/<span style="color: #006699;">head</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org6adce90" class="outline-3">
<h3 id="org6adce90"><span class="section-number-3">4.5</span> Navigation bar</h3>
<div class="outline-text-3" id="text-4-5">
<p>
Data Stories contain a navigation bar that allows users to return to
the Data Stories overview page.
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #006699;">body</span> <span style="color: #BA36A5;">class</span>=<span style="color: #008000;">"withNavbar"</span>&gt;
  &lt;<span style="color: #006699;">nav</span> <span style="color: #BA36A5;">class</span>=<span style="color: #008000;">"navbar fixed-top "</span>&gt;
    &lt;<span style="color: #006699;">div</span> <span style="color: #BA36A5;">class</span>=<span style="color: #008000;">"navbar-content"</span>&gt;
      &lt;<span style="color: #006699;">div</span> <span style="color: #BA36A5;">class</span>=<span style="color: #008000;">"navbar-icon"</span>&gt;
        &lt;<span style="color: #006699;">a</span> <span style="color: #BA36A5;">class</span>=<span style="color: #008000;">"navbar-brand"</span> <span style="color: #BA36A5;">href</span>=<span style="color: #008000;">"/"</span>&gt;
          &lt;<span style="color: #006699;">img</span> <span style="color: #BA36A5;">alt</span>=<span style="color: #008000;">"{{INSTANCE}} Data Stories home"</span> <span style="color: #BA36A5;">src</span>=<span style="color: #008000;">"/assets/imgs/{{INSTANCE}}-logo-square.png"</span>&gt;
        &lt;/<span style="color: #006699;">a</span>&gt;
      &lt;/<span style="color: #006699;">div</span>&gt;
      &lt;<span style="color: #006699;">div</span> <span style="color: #BA36A5;">class</span>=<span style="color: #008000;">"navbar-title"</span>&gt;
        &lt;<span style="color: #006699;">a</span> <span style="color: #BA36A5;">class</span>=<span style="color: #008000;">"navbar-brand"</span> <span style="color: #BA36A5;">href</span>=<span style="color: #008000;">"/"</span>&gt;{{INSTANCE}} Data Stories&lt;/<span style="color: #006699;">a</span>&gt;
      &lt;/<span style="color: #006699;">div</span>&gt;
    &lt;/<span style="color: #006699;">div</span>&gt;
  &lt;/<span style="color: #006699;">nav</span>&gt;
  &#8230;
&lt;/<span style="color: #006699;">body</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org4109a68" class="outline-3">
<h3 id="org4109a68"><span class="section-number-3">4.6</span> External links</h3>
<div class="outline-text-3" id="text-4-6">
<p>
Links that appear in the Data Story and that link to other web pages
must be specified in the following way:
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #006699;">a</span> <span style="color: #BA36A5;">href</span>=<span style="color: #008000;">"&#8230;"</span> <span style="color: #BA36A5;">rel</span>=<span style="color: #008000;">"noopener noreferrer"</span> <span style="color: #BA36A5;">target</span>=<span style="color: #008000;">"_blank"</span>&gt;&#8230;&lt;/<span style="color: #006699;">a</span>&gt;
</pre>
</div>

<p>
Every link that contains <code>target="_blank"</code> is susceptible to reverse
tabnagging, a serious security vulnerability explained in <a href="https://www.jitbit.com/alexblog/256-targetblank---the-most-underestimated-vulnerability-ever/">this article</a>.
</p>

<p>
Attribute <code>rel="noopener"</code> is a relatively new feature, available
since Chrome 49 (2016-03-02), Firefox 52 (2017-03-07), and Safari 10.1
(2017-03-27).  It is not supported by Microsoft browsers.
</p>

<p>
In old and/or Microsoft browsers <code>rel="noreferrer"</code> can be used to
achieve a similar effect: it prevents the <code>Referrer</code> HTTP header from
being sent.
</p>
</div>
</div>

<div id="outline-container-org59ba795" class="outline-3">
<h3 id="org59ba795"><span class="section-number-3">4.7</span> HTML elements</h3>
<div class="outline-text-3" id="text-4-7">
<p>
Data Stories defines the following two HTML elements:
</p>

<dl class="org-dl">
<dt><code>&lt;div class="story"&gt;</code></dt><dd>The tag that contains zero or more
<code>&lt;query&gt;</code> tags and that implements the Data Story.</dd>

<dt><code>&lt;query&gt;</code></dt><dd>The tag that implements one query within the Data
Story.</dd>
</dl>
</div>

<div id="outline-container-org0b8ce89" class="outline-4">
<h4 id="org0b8ce89"><span class="section-number-4">4.7.1</span> story element</h4>
<div class="outline-text-4" id="text-4-7-1">
<p>
The following attributes are defined on a <code>&lt;div class="story"&gt;</code>
element:
</p>

<dl class="org-dl">
<dt><code>data-endpoint</code></dt><dd>The URI of the SPARQL endpoint against which
all queries in the Data Story are executed.</dd>

<dt><code>data-output</code></dt><dd>The output format that is used to display SPARQL
result sets in.  The following values are
supported:

<dl class="org-dl">
<dt><code>boolean</code></dt><dd>Shows the result of an <code>ask</code> query.</dd>

<dt><code>error</code></dt><dd>Display the error value.</dd>

<dt><code>gallery</code></dt><dd>Shows HTML widgets in card rows.</dd>

<dt><code>gchart</code></dt><dd>Shows a UI for selecting numeric properties in order
to generate various diagrams.</dd>

<dt><code>geo</code></dt><dd>Shows GeoSPARQL results on a 2D map.</dd>

<dt><code>geo3d</code></dt><dd>Shows GeoSPARQL results on a 3D map.</dd>

<dt><code>pivot</code></dt><dd>Shows a UI for selecting numeric properties in order
to generate various diagrams and pivot tables.</dd>

<dt><code>raw</code></dt><dd>The textual content of the HTTP reply body. For
example, the SPARQL result set serialized in XML, JSON,
or CSV.</dd>

<dt><code>table</code></dt><dd>Shows the results in rows of an HTML table.  This is
the default value.</dd>
</dl></dd>
</dl>
</div>
</div>

<div id="outline-container-org028ff52" class="outline-4">
<h4 id="org028ff52"><span class="section-number-4">4.7.2</span> query element</h4>
<div class="outline-text-4" id="text-4-7-2">
<p>
The following attributes are defined on the <code>query</code> element:
</p>

<dl class="org-dl">
<dt><code>data-config-ref="URI"</code></dt><dd>The URI of a saved query in TriplyDB.</dd>

<dt><code>data-config="URI"</code></dt><dd>A URI that encodes a query together with
the configuration of a specific view.  These URIs can be
created within the SPARQL IDE.</dd>

<dt><code>data-endpoint="URI"</code></dt><dd>The URI of the SPARQL endpoint against
which a particular query is evaluated.  When absent, the value
of this attribute on the <code>&lt;div class="story"&gt;</code> tag is used.</dd>

<dt><code>data-query-ref="URI"</code></dt><dd>An absolute or relative URI to a file
that stores a SPARQL query.</dd>

<dt><code>data-output="VALUE"</code></dt><dd>The output format that is used to display
the SPARQL result set.  When absent, the value of this
attribute on the <code>&lt;div class="story"&gt;</code> tag is used.  See the
documentation of the Story element for the supported values.</dd>

<dt><code>data-show-query</code></dt><dd>By default, the query editor is hidden.  When
this attribute is present, the query editor is shown.</dd>
</dl>
</div>
</div>
</div>
</div>
<div id="outline-container-orgbdd4e8f" class="outline-2">
<h2 id="orgbdd4e8f"><span class="section-number-2">5</span> Text search</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgcf1e148" class="outline-3">
<h3 id="orgcf1e148"><span class="section-number-3">5.1</span> Text search GUI</h3>
</div>
<div id="outline-container-org59768bd" class="outline-3">
<h3 id="org59768bd"><span class="section-number-3">5.2</span> Text search API</h3>
<div class="outline-text-3" id="text-5-2">
<p>
The text search API returns a list of Linked Data entities based on a
supplied text string.  The text string is matched against the text in
literals and IRIs that appear in the Linked Data description of the
returned entities.
</p>

<p>
The text search API is only available for a dataset after an
ElasticSearch service has been created for that dataset.
</p>
</div>

<div id="outline-container-org12c19de" class="outline-4">
<h4 id="org12c19de"><span class="section-number-4">5.2.1</span> URI path</h4>
<div class="outline-text-4" id="text-5-2-1">
<p>
Text search requests are sent to the following URI path:
</p>

<div class="org-src-container">
<pre class="src src-uri">https://api.INSTANCE/datasets/ACCOUNT/DATASET/services/SERVICE/search
</pre>
</div>
</div>
</div>

<div id="outline-container-org2b6542c" class="outline-4">
<h4 id="org2b6542c"><span class="section-number-4">5.2.2</span> Reply format</h4>
<div class="outline-text-4" id="text-5-2-2">
<p>
The reply format is a JSON object.  Search results are returned in the
JSON array that is stored under key sequence <code>"hits"/"hits"</code>.  The
order in which search results appear in the array is meaningful:
better matches appear earlier.
</p>

<p>
Every search result is represented by a JSON object.  The name of the
Linked Data entity is specified under key sequence <code>"_id"</code>.
Properties of the Linked Data entity are stored as IRI keys.  The
values of these properties appear in a JSON array in order to allow
more than one object term per predicate term (as is often the case in
Linked Data).
</p>

<p>
The following code snippet shows part of the reply for the below
example request.  The reply includes two results for search string
“mew”, returning the Pokémon Mew (higher ranked result) and Mewtwo
(lower ranked result).
</p>

<div class="org-src-container">
<pre class="src src-json">{
  <span style="color: #0000FF;">"hits"</span>: {
    <span style="color: #0000FF;">"hits"</span>: [
      {
        <span style="color: #0000FF;">"_id"</span>: <span style="color: #008000;">"https://triply.cc/academy/pokemon/id/pokemon/mew"</span>,
        <span style="color: #0000FF;">"http://open vocab org/terms/canonicalUri"</span>: [ <span style="color: #008000;">"http://pokedex.dataincubator.org/pokemon/151"</span> ],
        <span style="color: #0000FF;">"https://triply cc/academy/pokemon/def/baseAttack"</span>: [ <span style="color: #D0372D;">100</span> ],
        <span style="color: #0000FF;">"https://triply cc/academy/pokemon/def/name"</span>: [ <span style="color: #008000;">"MEW"</span>, <span style="color: #008000;">"MEW"</span>, <span style="color: #008000;">"MEW"</span>, <span style="color: #008000;">"MEW"</span>, <span style="color: #008000;">"MEW"</span>, <span style="color: #008000;">"&#12511;&#12517;&#12454;"</span> ],
        &#8230;
      },
      {
        <span style="color: #0000FF;">"_id"</span>: <span style="color: #008000;">"https://triply.cc/academy/pokemon/id/pokemon/mewtwo"</span>,
        <span style="color: #0000FF;">"http://open vocab org/terms/canonicalUri"</span>: [ <span style="color: #008000;">"http://pokedex.dataincubator.org/pokemon/150"</span> ],
        <span style="color: #0000FF;">"https://triply cc/academy/pokemon/def/baseAttack"</span>: [ <span style="color: #D0372D;">110</span> ],
        <span style="color: #0000FF;">"https://triply cc/academy/pokemon/def/name"</span>: [ <span style="color: #008000;">"MEWTU"</span>, <span style="color: #008000;">"MEWTWO"</span>, <span style="color: #008000;">"MEWTWO"</span>, <span style="color: #008000;">"MEWTWO"</span>, <span style="color: #008000;">"MEWTWO"</span>, <span style="color: #008000;">"&#12511;&#12517;&#12454;&#12484;&#12540;"</span> ],
        &#8230;
      }
    ]
  },
  &#8230;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org8d209aa" class="outline-4">
<h4 id="org8d209aa"><span class="section-number-4">5.2.3</span> Example</h4>
<div class="outline-text-4" id="text-5-2-3">
<div class="org-src-container">
<pre class="src src-bash">$ curl <span style="color: #008000;">'https://api.demo.triply.cc/datasets/academy/pokemon/services/text/search?query=mew'</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orga94b5d8" class="outline-2">
<h2 id="orga94b5d8"><span class="section-number-2">6</span> REST API</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org0d30cc5" class="outline-3">
<h3 id="org0d30cc5"><span class="section-number-3">6.1</span> Datasets</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Triply API requests are always directed towards a specific URI path.
URI paths will often have the following form:
</p>

<div class="org-src-container">
<pre class="src src-uri">https://api.INSTANCE/datasets/ACCOUNT/DATATSET/
</pre>
</div>

<p>
Upper-case letter words must be replaced by the following values:
</p>

<dl class="org-dl">
<dt><code>INSTANCE</code></dt><dd>The host name of the TriplyDB instance that you want
to use.</dd>
<dt><code>ACCOUNT</code></dt><dd>The name of a specific user or a specific
organization.</dd>
<dt><code>DATASET</code></dt><dd>The name of a specific dataset.</dd>
</dl>

<p>
Here is an example of an URI path that points to the Triply API for
the Pokémon dataset:
</p>

<div class="org-src-container">
<pre class="src src-uri">https://api.demo.triply.cc/datasets/academy/pokemon/
</pre>
</div>
</div>
</div>

<div id="outline-container-org4555505" class="outline-3">
<h3 id="org4555505"><span class="section-number-3">6.2</span> Services</h3>
<div class="outline-text-3" id="text-6-2">
<p>
Some API requests require the availability of a specific service over
the dataset.  These requests are directed towards an URI path of the
following form:
</p>

<div class="org-src-container">
<pre class="src src-uri">https://api.INSTANCE/datasets/ACCOUNT/DATASET/services/SERVICE/
</pre>
</div>

<p>
Upper-case letter words must be replaced by the following values:
</p>

<dl class="org-dl">
<dt><code>SERVICE</code></dt><dd>The name of a specific service that has been started
for the corresponding dataset.</dd>

<dt>(no term)</dt><dd>See the previous section for <a href="#org0d30cc5">6.1</a> to learn the meaning of
<code>INSTANCE</code>, <code>ACCOUTN</code>, and <code>DATASET</code>.</dd>
</dl>

<p>
Here is an example of an URI path that points to an SPARQL endpoint
over the Pokémon dataset:
</p>

<div class="org-src-container">
<pre class="src src-uri">https://api.demo.triply.cc/datasets/academy/pokemon/services/pokemon/sparql
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdb7de1c" class="outline-3">
<h3 id="orgdb7de1c"><span class="section-number-3">6.3</span> Authentication</h3>
<div class="outline-text-3" id="text-6-3">
<p>
When a dataset is published publicly, most of the read operation on
that dataset can be performed without authentication.
</p>

<p>
Write operations and read operations on datasets that are published
internally or privately require authentication.
</p>
</div>

<div id="outline-container-org9d7d632" class="outline-4">
<h4 id="org9d7d632"><span class="section-number-4">6.3.1</span> Creating an API token</h4>
<div class="outline-text-4" id="text-6-3-1">
<p>
Authentication is implemented through API tokens.  An API token can be
created within the TriplyDB UI in the following way:
</p>

<ol class="org-ol">
<li>Log into your TriplyDB instance.</li>
<li>Click on the user menu in the top-right corner and click on “User settings”.</li>
<li>Go to the “API tokens” tab.</li>
<li>Click the “Create token” button, enter a description for the
token (e.g., “test-token”) and select the appropriate access
rights.</li>
<li>Click on “Create” and copy the created API token (a lengthy
string of characters).  This string is only shown once, upon
creation, and must not be shared with others.  (Other users
can create their own token in the here described way.)</li>
</ol>
</div>
</div>

<div id="outline-container-orgf053d5b" class="outline-4">
<h4 id="orgf053d5b"><span class="section-number-4">6.3.2</span> Using the API token</h4>
<div class="outline-text-4" id="text-6-3-2">
<p>
API tokens are used by specifying them in an HTTP request header as
follows:
</p>

<div class="org-src-container">
<pre class="src src-http"><span style="color: #BA36A5;">Authorization</span><span style="color: #8D8D84; font-style: italic;">:</span> <span style="color: #008000;">Bearer TOKEN</span>
</pre>
</div>

<p>
In the above, <code>TOKEN</code> should be replaced by your personal API token (a
lengthy sequence of characters).  See <a href="#org9d7d632">6.3.1</a> for
information on how to create an API token.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfe6aa23" class="outline-2">
<h2 id="orgfe6aa23"><span class="section-number-2">7</span> Admin tasks</h2>
<div class="outline-text-2" id="text-7">
<p>
Admin tasks are performed within the admin settings page.  The
following steps bring up the admin settings page:
</p>

<ol class="org-ol">
<li>In order to perform admin tasks, a user with admin credentials
must be logged into TriplyDB.  See <a href="#orga2a50f5">No description for this link</a> for how to log into
TriplyDB.</li>

<li>Once an admin is logged in, the admin settings are accessed by
clicking on the user menu in top-right corner and selecting the
“Admin settings” menu item.</li>
</ol>

<p>
This brings up the following admin settings page from which admin
tasks can be performed:
</p>


<div id="orgd514d03" class="figure">
<p><img src="https://wouterbeek.github.io/resource/img/triply/admin-settings.png" alt="admin-settings.png" />
</p>
<p><span class="figure-number">Figure 10: </span>Screenshot of the admin settings page.</p>
</div>
</div>

<div id="outline-container-org1dffe95" class="outline-3">
<h3 id="org1dffe95"><span class="section-number-3">7.1</span> Create a new user</h3>
<div class="outline-text-3" id="text-7-1">
<p>
New users can only be created by administrators by performing the
following steps:
</p>

<ol class="org-ol">
<li>Log in as an administrator, click on the “Admin settings” link in
the user menu (top-right corner) and click the “Accounts” tab.
This brings up an overview of all users and organizations on the
TriplyDB instance.</li>

<li>Click the “Add user” button.</li>

<li>Fill in the user name and email address of the prospective user.
The user name must consist of alphanumeric characters (<code>A-Za-z</code>)
and hyphens (<code>-</code>).</li>

<li>Click the “Add user” button.  This sends an account creation
email to the prospective user, containing a link that allows them
to log in.</li>
</ol>

<p>
In addition to the above default procedure, the following two options
are provided for user account creation:
</p>

<dl class="org-dl">
<dt>Temporary account</dt><dd>By default, user accounts do not expire.
Sometimes it is useful to create a temporary account by specifying
a concrete data in the “Account expiration date” widget.</dd>

<dt>Preset password</dt><dd>By default, a user can set her password after
logging in for the first time by clicking on the link in the
account creation email.  When a password is entered in the
“Password” field, the user must enter this password in order to
log in for the first time.</dd>
</dl>
</div>
</div>

<div id="outline-container-orgfbfdff3" class="outline-3">
<h3 id="orgfbfdff3"><span class="section-number-3">7.2</span> Account overview</h3>
<div class="outline-text-3" id="text-7-2">
<p>
Go to the “Accounts tab” to receive an overview of all accounts on the
TriplyDB instance.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Wouter Beek</p>
<p class="date">Created: 2019-05-07 Tue 10:32</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
