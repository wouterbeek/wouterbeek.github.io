<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="author" content="Wouter Beek">
    <meta name="description" content="Kadaster SPARQL Tutorial">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="/resource/css/presentation.css">
    <link rel="stylesheet" href="/resource/reveal.js-3.7.0/lib/css/default.css">
    <link rel="stylesheet" href="/resource/reveal.js-3.7.0/css/reveal.css">
    <link rel="stylesheet" href="/resource/reveal.js-3.7.0/css/theme/simple.css" id="theme">
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? '/resource/reveal.js-3.7.0/css/print/pdf.css' : '/resource/reveal.js-3.7.0/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
    <title>Kadaster SPARQL Tutorial</title>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">

        <section>
          <h1>Kadaster SPARQL Tutorial</h1>
          <p>Gegeven op 10 januari, 18 januari, 6 februari, en 15
            fabruari 2018</p>
          <p><a href="http://wouterbeek.com" target="_blank">Wouter Beek</a>
            (<a href="mailto:wouter@triply.cc">wouter@triply.cc</a>)</p>
          <a href="https://kadaster.nl" target="_blank">
            <img src="/resource/img/logo/kadaster.png" height="150">
          </a>
          <a href="https://triply.cc" target="_blank">
            <img src="/resource/img/triply/logo.svg" height="150">
          </a>
        </section>

        <section>
          <section>
            <h2>Wat is Linked Data?</h2>
          </section>

          <section>
            <h3>World Wide Web: Documenten</h3>
            <figure>
              <a href="/img/web-of-documents.png">
                <img src="/resource/img/linked-data/web-of-documents.png">
              </a>
            </figure>
          </section>

          <section>
            <h3>Semantic Web: Linked Data</h3>
            <figure>
              <a href="/img/web-of-data.png">
                <img src="/resource/img/linked-data/web-of-data.png">
              </a>
            </figure>
          </section>

          <section>
            <h3>Linked Data: 5 sterren</h3>
            <figure>
              <a href="/resource/img/linked-data/5-stars.png">
                <img src="/resource/img/linked-data/5-stars.png">
              </a>
              <figcaption class="size-80">Bron:
                (<a href="https://5stardata.info">http://5stardata.info</a>)</figcaption>
            </figure>
          </section>
        </section>

        <section>
          <section>
            <h2>Deel I: De eerste SPARQL vraag</h2>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=select+%3Fs+%3Fp+%3Fo+%7B%0A++%3Fs+%3Fp+%3Fo%0A%7D%0Alimit+5&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=De+eerste+SPARQL+vraag&headers=%7B%7D&outputFormat=table" target="_blank">De eerste SPARQL vraag</a></h3>
            <pre><code data-noescape data-trim>
select ?s ?p ?o {
  ?s ?p ?o.
}
limit 5
              </code></pre>
            <p>
              <small>
                Onderdelen:<br>
                projectie: <code>select ?s ?p ?o</code><br>
                patroon: <code>?s ?p ?o.</code><br>
                limiet: <code>limit 5</code>
              </small>
            </p>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=select+%3Fo+%3Fp+%3Fs+%7B%0A++%3Fs+%3Fp+%3Fo%0A%7D%0Alimit+5%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Verander+de+projectie&headers=%7B%7D&outputFormat=table" target="_blank">Verander de projectie</a></h3>
            <pre><code data-noescape data-trim>
select <mark>?o ?p ?s</mark> {
  ?s ?p ?o.
}
limit 5
            </code></pre>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=select+%3Fs+%3Fp+%3Fo+%7B%0A++%3Fs+%3Fp+%3Fo%0A%7D%0Alimit+10%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Verander+de+limiet&headers=%7B%7D&outputFormat=table" target="_blank">Verander de limiet</a></h3>
            <pre><code data-noescape data-trim>
select ?s ?p ?o {
  ?s ?p ?o.
}
limit <mark>10</mark>
              </code></pre>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=select+%3Fs+%3Fp+%3Fo+%7B%0A++%3Fs+%3Fp+%3Fo%0A%7D%0Alimit+5%0Aoffset+5&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Voeg+een+offset+toe&headers=%7B%7D&outputFormat=table" target="_blank">Voeg een offset toe</a></h3>
            <pre><code data-noescape data-trim>
select ?s ?p ?o {
  ?s ?p ?o.
}
limit 5
<mark>offset 5</mark>
              </code></pre>
          </section>
        </section>

        <section>
          <section>
            <h3>Deel II: Naamgeving &amp; Ambiguïteit</h3>
          </section>

          <section>
            <h3>Alles heeft een naam</h3>
            <figure>
              <a href="/resource/img/linked-data/naming.jpg">
                <img src="/resource/img/linked-data/naming.jpg">
              </a>
            </figure>
          </section>

          <section>
            <h3>Soms hebben 2 verschillende dingen dezelfde naam</h3>
          </section>

          <section>
            <h3><a href="http://yasgui.org/#query=select+%3Fs+%7B%0A++%3Fs+%3Fp+%22De+Brug%22%5E%5E%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23string%3E+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=🌉+Wat+is+‘De+Brug’%3F&headers=%7B%7D&outputFormat=table" target="_blank">Wat is ‘De Brug’? 🌉</a></h3>
            <pre><code data-noescape data-trim>
select ?s {
  ?s ?p "De Brug"^^&lt;http://www.w3.org/2001/XMLSchema#string&gt;.
}
limit 100
              </code></pre>
            <p class="size-80">
              <code>"De
                Brug"^^&lt;http://www.w3.org/2001/XMLSchema#string&gt;</code>
              is een <b>literal</b>.
            </p>
            <p class="size-80">
              <code>&lt;http://www.w3.org/2001/XMLSchema#string&gt;</code>
              is het <b>datatype</b>.
            </p>
          </section>

          <section>
            <h3><a href="http://yasgui.org/#query=prefix+xsd%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%3E%0Aselect+%3Fs+%7B%0A++%3Fs+%3Fp+%22De+Brug%22%5E%5Exsd%3Astring+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=🌉+Wat+is+‘De+Brug’%3F&headers=%7B%7D&outputFormat=table" target="_blank">Wat is ‘De Brug’? 🌉</a></h3>
            <pre><code data-noescape data-trim>
prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
select ?s {
  ?s ?p "De Brug"^^xsd:string.
}
limit 100
              </code></pre>
            <p class="size-80">
              URI kunnen worden afgekort met <code>prefix</code>
              declaraties.
            </p>
          </section>
          <section>
            <h3><a href="http://yasgui.org/#query=prefix+xsd%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%3E%0Aselect+%3Fs+%7B%0A++%7B%0A++++%3Fs+%3Fp+%22De+Brug%22%5E%5Exsd%3Astring+.%0A++%7D+union+%7B%0A++++%3Fs+%3Fp+%22De+Brug%22%40nl+.%0A++%7D%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Nog+meer+dingen+die+%E2%80%98‘De+Brug’%E2%80%99+heten%E2%80%A6&headers=%7B%7D&outputFormat=table" target="_blank">Nog meer dingen die ‘De Brug’ heten…</a></h3>
            <pre><code data-noescape data-trim>
prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
select ?s {
  {
    ?s ?p "De Brug"^^xsd:string.
  } union {
    ?s ?p "De Brug"@nl.
  }
}
limit 100
              </code></pre>
            <p class="size-80">
              <code>"De Brug"@nl</code> is een <b>language-tagged
                string</b>.  Dit betekent dat <code>"De Brug"</code>
                geïnterpreteerd moet worden in het Nederlands
                (<code>nl</code>).
            </p>
            <p class="size-80">
              <code>{ A } union { B }</code> geeft aan dat de de
              resultaten van query <code>A</code> én de resultaten
              van query <code>B</code> willen.
            </p>
          </section>

          <section>
            <h3><a href="http://yasgui.org/#query=prefix+xsd%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%3E%0Aselect+distinct+%3Fklasse+%7B%0A++%7B%0A++++%3Fs+%3Fp+%22De+Brug%22%5E%5Exsd%3Astring+%3B+a+%3Fklasse+.%0A++%7D+union+%7B%0A++++%3Fs+%3Fp+%22De+Brug%22%40nl+%3B+a+%3Fklasse+.%0A++%7D%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Wat+iets+is+kunnen+we+zien+aan+de+klasse&headers=%7B%7D&outputFormat=table" target="_blank">Wat iets is kunnen we zien aan de <i>klasse</i></a></h3>
            <pre><code data-noescape data-trim>
prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
select distinct ?klasse {
  ?s a ?klasse.
  {
    ?s ?p "De Brug"^^xsd:string.
  } union {
    ?s ?p "De Brug"@nl.
  }
}
limit 100
              </code></pre>
            <p class="size-80">
              ‘<code>a</code>’ duidt de relatie aan tussen een
              instantie en een klasse.  ‘<code>a</code>’ is een
              afkorting voor <code>rdf:type</code>, wat een
              afkorting is
              voor <code>&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</code>.
            </p>
            <p class="size-80">
              <code>distinct</code> laat alleen unieke resultaten zien.
            </p>
            <p class="size-80">
              ‘<code>;</code>’ is een afkorting die de subject term herhaalt.
            </p>
          </section>
        </section>

        <section>
          <section>
            <h2>Deel III: Linked Geodata</h2>
          </section>

          <section>
            <h3><a href="http://yasgui.org/#query=prefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fs+%7B%0A++%3Fs+rdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=%F0%9F%8F%99+Wat+is+Apeldoorn%3F&headers=%7B%7D&outputFormat=table" target="_blank">🏙 Wat is Apeldoorn?</a></h3>
            <pre><code data-noescape data-trim>
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?s {
  ?s rdfs:label "Apeldoorn"@nl.
}
limit 100
              </code></pre>
            <p class="size-80">
              <code>rdfs:label</code> geeft een menselijk
              interpreteerbare naam van een ding.
            </p>
          </section>
          <section>
            <h3><a href="http://yasgui.org/#query=prefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fs+%3Flabel+%7B%0A++%3Fs+rdfs%3Alabel+%22Apeldoorn%22%40nl+%3B+a+%3Fklasse+.%0A++%3Fklasse+rdfs%3Alabel+%3Flabel+.%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Ook+klasses+hebben+een+label&headers=%7B%7D&outputFormat=table" target="_blank">Ook klasses hebben een label</a></h3>
            <pre><code data-noescape data-trim>
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?s ?label {
  ?s a ?klasse;
     rdfs:label "Apeldoorn"@nl.
  ?klasse rdfs:label ?label.
}
limit 100
              </code></pre>
            <p class="size-80">
              Merk op dat we <code>?klasse</code> niet gebruiken in de
              projectie (zie volgende query).
            </p>
          </section>

          <section>
            <h3><a href="http://yasgui.org/#query=prefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fs+%3Flabel+%7B%0A++%3Fs+rdfs%3Alabel+%22Apeldoorn%22%40nl+%3B+a%2Frdfs%3Alabel+%3Flabel+.%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Wat+we+niet+gebruiken+mogen+we+overslaan&headers=%7B%7D&outputFormat=table" target="_blank">Wat we niet gebruiken mogen we overslaan</a></h3>
            <pre><code data-noescape data-trim>
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?s ?label {
  ?s a/rdfs:label ?label;
     rdfs:label "Apeldoorn"@nl.
}
limit 100
              </code></pre>
            <p class="size-80">
              We slaan <code>?klasse</code> uit de vorige query over.
            </p>
            <p class="size-80">
              <code>X/Y</code> is een <b>property path</b>.
            </p>
          </section>

          <section>
            <h3><a href="http://yasgui.org/#query=prefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fshape+%3FshapeLabel+%7B%0A++%3Finstantie+rdfs%3Alabel+%22Apeldoorn%22%40nl+%3B%0A+++++++++++++geo%3AhasGeometry%2Fgeo%3AasWKT+%3Fshape+%3B%0A+++++++++++++a%2Frdfs%3Alabel+%3FshapeLabel+.%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Ambigu%C3%AFteit+%2B+geografie&headers=%7B%7D&outputFormat=table" target="_blank">Ambiguïteit + geografie</a></h3>
            <pre><code data-noescape data-trim>
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?shape ?shapeLabel {
  ?s a/rdfs:label ?shapeLabel;
     geo:hasGeometry/geo:asWKT ?shape;
     rdfs:label "Apeldoorn"@nl.
}
limit 100
              </code></pre>
            <p class="size-80">
              <code>geo:hasGeometry/geo:asWKT</code> geeft de
              Well-Known Text (WKT) representatie van een geometrie.
            </p>
            <p class="size-80">
              Merk op dat we verschillende vocabulaires door elkaar
              heen gebruiken: <code>rdfs</code> van W3C
              en <code>geo</code> van OGC.
            </p>
          </section>

          <section>
            <h3>🏙 Welke Apeldoorn bedoel je?</h3>
            <h3><a href="http://yasgui.org/#query=prefix+brt%3A+%3Chttp%3A%2F%2Fbrt.basisregistraties.overheid.nl%2Fdef%2Ftop10nl%23%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fshape+%3FshapeLabel+%7B%0A++%3Finstantie+rdfs%3Alabel+%22Apeldoorn%22%40nl+%3B%0A+++++++++++++geo%3AhasGeometry%2Fgeo%3AasWKT+%3Fshape+%3B%0A+++++++++++++a+brt%3ARegistratiefGebied+.%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Ik+bedoel+het+registratief+gebied&headers=%7B%7D&outputFormat=leaflet">Ik
            bedoel het registratief gebied</a></h3>
            <pre><code data-noescape data-trim>
prefix brt: &lt;http://brt.basisregistraties.overheid.nl/def/top10nl#&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?shape ?shapeLabel {
  ?instantie a brt:RegistratiefGebied;
             geo:hasGeometry/geo:asWKT ?shape;
             rdfs:label "Apeldoorn"@nl.
}
limit 100
              </code></pre>
          </section>
        </section>

        <section>
          <section>
            <h2>Deel IV: De BAG bevragen met SPARQL</h2>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aselect+%3FopenbareRuimte+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=BAG+openbare+ruimte&headers=%7B%7D&outputFormat=table" target="_blank">BAG openbare ruimte</a></h3>
            <pre><code data-noescape data-trim>
prefix &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
select ?openbareRuimte {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat".
}
limit 100
              </code></pre>
            <p>Openbare ruimtes die ‘Hofstraat’ heten.</p>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aselect+%3FopenbareRuimte+%3Fwoonplaats+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=BAG+openbare+ruimte+%2B+woonplaats&headers=%7B%7D&outputFormat=table" target="_blank">BAG openbare ruimte + woonplaats</a></h3>
            <pre><code data-noescape data-trim>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
select ?openbareRuimte ?woonplaats {
  ?openbareRuimte bag:bijbehorendeWoonplaats ?woonplaats;
                  bag:naamOpenbareRuimte "Hofstraat".
}
limit 100
              </code></pre>
            <p>Openbare ruimtes die ‘Hofstraat’ heten én hun bijbehorende woonplaats.</p>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3FopenbareRuimte+%3Fwoonplaats+%3Flabel+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%3Flabel+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Menselijk+leesbare+labels&headers=%7B%7D&outputFormat=table" target="_blank">Menselijk leesbare labels</a></h3>
            <pre><code data-noescape data-trim>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
select ?openbareRuimte ?woonplaats ?label {
  ?openbareRuimte bag:bijbehorendeWoonplaats ?woonplaats;
                  bag:naamOpenbareRuimte "Hofstraat".
  ?woonplaats bag:naamWoonplaats ?label.
}
limit 100
              </code></pre>
            <p class="size-80">
              Weer ambiguïteit: er zijn heel veel openbare ruimtes die ‘Hofstraat’ heten.
            </p>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3FopenbareRuimte+%3Fwoonplaats+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Maak+het+patroon+specifieker&headers=%7B%7D&outputFormat=table" target="_blank">Maak het patroon specifieker</a></h3>
            <pre><code data-noescape data-trim>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?openbareRuimte ?woonplaats {
  ?openbareRuimte bag:bijbehorendeWoonplaats ?woonplaats;
                  bag:naamOpenbareRuimte "Hofstraat".
  ?woonplaats rdfs:label <mark>"Apeldoorn"@nl</mark>.
}
limit 100
              </code></pre>
            <p class="size-80">De Hofstraat in <i>Apeldoorn</i>.  (Er
            zijn 2 openbare ruimtes; hierover later meer.)
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fnummeraanduiding+%3FopenbareRuimte+%3Fnummeraanduiding+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats%2Frdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++%3Fnummeraanduiding+bag%3AbijbehorendeOpenbareRuimte+%3FopenbareRuimte+%3B%0A++++++++++++++++++++bag%3Ahuisnummer+110+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Voeg+nummeraanduiding+toe&headers=%7B%7D&outputFormat=table" target="_blank">Voeg nummeraanduiding toe</a></h3>
            <pre><code data-noescape data-trim>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?nummeraanduiding ?openbareRuimte {
  ?openbareRuimte bag:bijbehorendeWoonplaats<mark>/rdfs:label</mark> "Apeldoorn"@nl;
                  bag:naamOpenbareRuimte "Hofstraat".
<mark>  ?nummeraanduiding bag:bijbehorendeOpenbareRuimte ?openbareRuimte;
                    bag:huisnummer 110.</mark>
}
limit 100
              </code></pre>
            <p class="size-80">
              Met property path notatie (<code>/</code>) slaan we de
              niet gebruikte <code>?woonplaats</code> over.
            </p>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fshape+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats%2Frdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++%3Fnummeraanduiding+bag%3AbijbehorendeOpenbareRuimte+%3FopenbareRuimte+%3B%0A++++++++++++++++++++bag%3Ahuisnummer+110+.%0A++%3Fverblijfsobject+bag%3Ahoofdadres+%3Fnummeraanduiding+%3B%0A+++++++++++++++++++bag%3Apandrelatering+%3Fpand+.%0A++%3Fpand+bag%3AgeometriePand%2Fgeo%3AasWKT+%3Fshape+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Voeg+verblijfsobject+en+pand+toe&headers=%7B%7D&outputFormat=leaflet">Voeg verblijfsobject en pand toe</a></h3>
            <pre><code data-noescape data-trim>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select <mark>?shape</mark> {
  ?openbareRuimte bag:bijbehorendeWoonplaats/rdfs:label "Apeldoorn"@nl;
                  bag:naamOpenbareRuimte "Hofstraat".
  ?nummeraanduiding bag:bijbehorendeOpenbareRuimte ?openbareRuimte;
                    bag:huisnummer 110.
<mark>  ?verblijfsobject bag:hoofdadres ?nummeraanduiding;
                   bag:pandrelatering ?pand.
  ?pand bag:geometriePand/geo:asWKT ?shape.</mark>
}
limit 100
              </code></pre>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fshape+%3FshapeLabel+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats%2Frdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++%3Fnummeraanduiding+bag%3AbijbehorendeOpenbareRuimte+%3FopenbareRuimte+%3B%0A++++++++++++++++++++bag%3Ahuisnummer+%3FshapeLabel+.%0A++%3Fverblijfsobject+bag%3Ahoofdadres+%3Fnummeraanduiding+%3B%0A+++++++++++++++++++bag%3Apandrelatering%2Fbag%3AgeometriePand%2Fgeo%3AasWKT+%3Fshape+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Maak+patroon+generieker&headers=%7B%7D&outputFormat=leaflet">Maak patroon generieker</a></h3>
            <pre><code data-noescape data-trim>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?shape <mark>?shapeLabel</mark> {
  ?openbareRuimte bag:bijbehorendeWoonplaats/rdfs:label "Apeldoorn"@nl;
                  bag:naamOpenbareRuimte "Hofstraat".
  ?nummeraanduiding bag:bijbehorendeOpenbareRuimte ?openbareRuimte;
                    bag:huisnummer <mark>?shapeLabel</mark>.
  ?verblijfsobject bag:hoofdadres ?nummeraanduiding;
                   bag:pandrelatering<mark>/</mark>bag:geometriePand/geo:asWKT ?shape.
}
limit 100
              </code></pre>
            <p class="size-80">Waarom zien we sommige panden dubbel?</p>
          </section>
          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3FshapeVerblijfsobject+%3FshapeVerblijfsobjectColor+%3FshapeVerblijfsobjectLabel+%3FshapePand+%3FshapePandLabel+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats%2Frdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++%3Fnummeraanduiding+bag%3AbijbehorendeOpenbareRuimte+%3FopenbareRuimte+%3B%0A++++++++++++++++++++bag%3Apostcode+%3Fpostcode+%3B%0A++++++++++++++++++++bag%3Ahuisnummer+%3Fhuisnummer+.%0A++%3Fverblijfsobject+bag%3Ahoofdadres+%3Fnummeraanduiding+%3B%0A+++++++++++++++++++geo%3AhasGeometry%2Fgeo%3AasWKT+%3FshapeVerblijfsobject+%3B%0A+++++++++++++++++++bag%3Apandrelatering+%3Fpand+%3B%0A+++++++++++++++++++a%2Frdfs%3Alabel+%3Flabel+.%0A++%3Fpand+bag%3AgeometriePand%2Fgeo%3AasWKT+%3FshapePand+.%0A++bind+(concat('Hofstraat+'%2Cstr(%3Fhuisnummer))+as+%3FshapePandLabel)%0A++bind+(concat(%3FshapePandLabel%2C'+'%2Cstr(%3Fpostcode)%2C'%3Cbr%3E'%2Cstr(%3Flabel))+as+%3FshapeVerblijfsobjectLabel)%0A++bind+(%22red%22+as+%3FshapeVerblijfsobjectColor)%0A%7D%0Alimit+1000%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=%C3%89%C3%A9n+pand+kan+meerdere+verblijfsobjecten+hebben&headers=%7B%7D&outputFormat=leaflet">Één pand kan meerdere verblijfsobjecten hebben</a></h3>
            <pre><code data-noescape data-trim>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?shapeVerblijfsobject ?shapeVerblijfsobjectColor ?shapeVerblijfsobjectLabel ?shapePand ?shapePandLabel {
  ?openbareRuimte bag:bijbehorendeWoonplaats/rdfs:label "Apeldoorn"@nl;
                  bag:naamOpenbareRuimte "Hofstraat".
  ?nummeraanduiding bag:bijbehorendeOpenbareRuimte ?openbareRuimte;
                    bag:huisnummer ?huisnummer;
                    bag:postcode ?postcode.
  ?verblijfsobject a/rdfs:label ?label;
                   bag:hoofdadres ?nummeraanduiding;
                   bag:pandrelatering ?pand;
                   geo:hasGeometry/geo:asWKT ?shapeVerblijfsobject.
  ?pand bag:geometriePand/geo:asWKT ?shapePand.
  bind (concat('Hofstraat ',str(?huisnummer)) as ?shapePandLabel)
  bind (concat(?shapePandLabel,' ',str(?postcode),'<br>',str(?label)) as ?shapeVerblijfsobjectLabel)
  bind ("red" as ?shapeVerblijfsobjectColor)
}
limit 1000
              </code></pre>
          </section>
        </section>

        <section>
          <section>
            <h2>Deel V: Federatie</h2>
          </section>

          <section>
            <h3>Linked Open Data Cloud</h3>
            <figure>
              <a href="/resource/img/lod-cloud/lod-cloud-2017.png">
                <img src="/resource/img/lod-cloud/lod-cloud-2017.png">
              </a>
              <figcaption>Datasets die tot de LOD Cloud behoren.  Deze
                kunnen met SPARQL bevraagd worden.</figcaption>
            </figure>
          </section>

          <section>
            <h3><a href="http://yasgui.org/#query=prefix+brt%3A+%3Chttp%3A%2F%2Fbrt.basisregistraties.overheid.nl%2Fdef%2Ftop10nl%23%3E%0Aprefix+dbo%3A+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2F%3E%0Aprefix+foaf%3A+%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aprefix+xsd%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%3E%0Aselect+%3Fshape+%3FshapeLabel+%7B%0A++bind+(%22Amsterdam%22+as+%3Fnaam)%0A++bind+(strdt(%3Fnaam%2Cxsd%3Astring)+as+%3Fx)%0A++%3Fplaats1+rdfs%3Alabel+%3Fx+%3B+brt%3AisBAGwoonplaats+true+%3B+geo%3AhasGeometry%2Fgeo%3AasWKT+%3Fshape+.%0A++bind+(strlang(%3Fnaam%2C%22nl%22)+as+%3Fy)%0A++service+%3Chttps%3A%2F%2Fdbpedia.org%2Fsparql%3E+%7B%0A++++%3Fplaats2+rdfs%3Alabel+%3Fy+%3B+foaf%3Adepiction+%3Fvlag+.%0A++%7D%0A++bind+(concat('%3Ch2%3E'%2C%3Fnaam%2C'%3C%2Fh2%3E'%2Cif(bound(%3Fvlag)%2Cconcat('%3Cimg+src%3D%22'%2Cstr(%3Fvlag)%2C'%22+style%3D%22max-width%3A+150px%3B%22%3E')%2C'')%2C'%3Cp%3EExterne+representatie%3A+%3Ca+href%3D%22'%2Cstr(%3Fplaats2)%2C'%22%3E%5BDBpedia%5D%3C%2Fa%3E%3C%2Fp%3E')+as+%3FshapeLabel)%0A%7D%0Alimit+1%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fapi.krr.triply.cc%2Fdatasets%2FKadaster%2Fgeosoup2%2Fservices%2Fgeosoup%2Fsparql&requestMethod=POST&tabTitle=%F0%9F%95%B8+BRT%2FBAG+gemeente+%E2%86%92+DBpedia&headers=%7B%7D&outputFormat=leaflet">BRT/BAG gemeente → DBpedia 🕸</a></h3>
            <pre><code data-noescape data-trim>
prefix brt: &lt;http://brt.basisregistraties.overheid.nl/def/top10nl#&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?shape ?shapeLabel {
  bind("Amsterdam"@nl as ?naam)
  ?plaats1 brt:isBAGwoonplaats true;
           geo:hasGeometry/geo:asWKT ?shape;
           rdfs:label ?naam;
  <mark>service &lt;https://dbpedia.org/sparql&gt; {</mark>
    ?plaats2 foaf:depiction ?vlag;
             rdfs:label ?naam.
  <mark>}</mark>
}
limit 1
              </code></pre>
            <p class="size-80">
              <code>service &lt;URL&gt; { A }</code> betekent: voer
              query <code>A</code> uit op SPARQL
              endpoint <code>URL</code>, en voeg de resultaten samen.
            </p>
          </section>

          <section>
            <h3><a href="http://yasgui.org/#query=prefix+brt%3A+%3Chttp%3A%2F%2Fbrt.basisregistraties.overheid.nl%2Fdef%2Ftop10nl%23%3E%0Aprefix+dbo%3A+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2F%3E%0Aprefix+foaf%3A+%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aprefix+xsd%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%3E%0Aselect+%3Fshape+%3FshapeLabel+%7B%0A++bind+(%22Apeldoorn%22+as+%3Fnaam)%0A++bind+(strdt(%3Fnaam%2Cxsd%3Astring)+as+%3Fx)%0A++%3Fplaats1+rdfs%3Alabel+%3Fx+%3B+brt%3AisBAGwoonplaats+true+%3B+geo%3AhasGeometry%2Fgeo%3AasWKT+%3Fshape+.%0A++bind+(strlang(%3Fnaam%2C%22nl%22)+as+%3Fy)%0A++service+%3Chttps%3A%2F%2Fdbpedia.org%2Fsparql%3E+%7B%0A++++%3Fplaats2+rdfs%3Alabel+%3Fy+.%0A++++optional+%7B+%3Fplaats2+foaf%3Adepiction+%3Fvlag+.+%7D%0A++%7D%0A++bind+(concat('%3Ch2%3E'%2C%3Fnaam%2C'%3C%2Fh2%3E'%2Cif(bound(%3Fvlag)%2Cconcat('%3Cimg+src%3D%22'%2Cstr(%3Fvlag)%2C'%22+style%3D%22max-width%3A+150px%3B%22%3E')%2C'')%2C'%3Cp%3EExterne+representatie%3A+%3Ca+href%3D%22'%2Cstr(%3Fplaats2)%2C'%22%3E%5BDBpedia%5D%3C%2Fa%3E%3C%2Fp%3E')+as+%3FshapeLabel)%0A%7D%0Alimit+1%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fapi.krr.triply.cc%2Fdatasets%2FKadaster%2Fgeosoup2%2Fservices%2Fgeosoup%2Fsparql&requestMethod=POST&tabTitle=Apeldoorn+heeft+geen+vlag&headers=%7B%7D&outputFormat=leaflet">Apeldoorn heeft geen vlag</a></h3>
            <pre><code data-noescape data-trim>
prefix brt: &lt;http://brt.basisregistraties.overheid.nl/def/top10nl#&gt;
prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?shape ?shapeLabel {
  bind("Apeldoorn"@nl as ?naam)
  ?plaats1 brt:isBAGwoonplaats true;
           geo:hasGeometry/geo:asWKT ?shape;
           rdfs:label ?naam.
  service &lt;https://dbpedia.org/sparql&gt; {
    ?plaats2 rdfs:label ?naam.
    <mark>optional { ?plaats2 foaf:depiction ?vlag. }</mark>
  }
}
limit 1
              </code></pre>
            <p class="size-80">
              <code>optional { A }</code> betekent:
              voer <code>A</code> uit, indien mogelijk.
            </p>
            <p class="size-80">
              Met name nuttig voor ontbrekende waardes (data op het
              web is vaak onvolledig).
            </p>
          </section>
        </section>

        <section>
          <section>
            <h2>Deel VI:<br>Aggregatie</h2>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aselect+%3Fshape+%3FshapeLabel+%7B%0A++%3Fverblijfsobject+bag%3Ahoofdadres%2Fbag%3AbijbehorendeOpenbareRuimte%2Fbag%3AbijbehorendeWoonplaats%2Fbag%3AnaamWoonplaats+%22Apeldoorn%22+%3B%0A+++++++++++++++++++bag%3Apandrelatering+%3Fpand+.%0A++%3Fpand+bag%3AoorspronkelijkBouwjaar+%3FshapeLabel+%3B%0A++++++++bag%3AgeometriePand%2Fgeo%3AasWKT+%3Fshape+.%0A%7D%0Aorder+by+asc(%3FshapeLabel)%0Alimit+50%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Oudste+pand+in+Apeldoorn+👵👴&headers=%7B%7D&outputFormat=leaflet">Oudste pand in Apeldoorn 👵👴</a></h3>
            <pre><code data-noescape data-trim>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
select ?shape ?shapeLabel {
  ?verblijfsobject bag:hoofdadres/bag:bijbehorendeOpenbareRuimte/bag:bijbehorendeWoonplaats/bag:naamWoonplaats "Apeldoorn";
                   bag:pandrelatering ?pand.
  ?pand bag:geometriePand/geo:asWKT ?shape;
        bag:oorspronkelijkBouwjaar ?shapeLabel.
}
order by asc(?shapeLabel)
limit 50
              </code></pre>
          </section>
        </section>

        <section>
          <section>
            <h2>Deel VII: Versies in de BAG</h2>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3FopenbareRuimte+%3Fwoonplaats+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Zijn+er+meerdere+Apeldoorns%3F&headers=%7B%7D&outputFormat=table" target="_blank">Zijn er meerdere Apeldoorns?</a></h3>
            <pre><code data-noescape data-trim>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?openbareRuimte ?woonplaats {
  ?openbareRuimte bag:bijbehorendeWoonplaats ?woonplaats;
                  bag:naamOpenbareRuimte "Hofstraat".
  ?woonplaats rdfs:label "Apeldoorn"@nl.
}
limit 100
              </code></pre>
            <table class="size-80">
              <tr><th>openbareRuimte</th><th>woonplaats</th></tr>
              <tr><td>openbare-ruimte:0200300022471548</td><td>woonplaats:2247</td></tr>
              <tr><td>openbare-ruimte:0200300022471548</td><td>woonplaats:3560</td></tr>
            </table>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fwoonplaats+%3Fstatus+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%22Apeldoorn%22%40nl+%3B%0A++++++++++++++bag%3Astatus+%3Fstatus+.%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=BAG+status&headers=%7B%7D&outputFormat=leaflet">BAG status</a></h3>
            <pre><code data-noescape data-trim>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?woonplaats <mark>?status</mark> {
  ?openbareRuimte bag:bijbehorendeWoonplaats ?woonplaats;
                  bag:naamOpenbareRuimte "Hofstraat".
  ?woonplaats <mark>bag:status ?status</mark>;
              rdfs:label "Apeldoorn"@nl.
}
limit 100
              </code></pre>
            <table class="size-80">
              <tr><th>woonplaats</th><th>status</th></tr>
              <tr><td>woonplaats:2247</td><td>begrip:WoonplaatsAangewezen</td></tr>
	            <tr><td>woonplaats:2247</td><td>begrip:WoonplaatsIngetrokken</td></tr>
              <tr><td>woonplaats:3560</td><td>begrip:WoonplaatsAangewezen</td></tr>
            </table>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+begrip%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fid%2Fbegrip%2F%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3FopenbareRuimte+%3Fwoonplaats+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++filter+not+exists+%7B%0A++++%3Fwoonplaats+bag%3Astatus+begrip%3AWoonplaatsIngetrokken+.%0A++%7D%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Alleen+huidige+woonplaatsen&headers=%7B%7D&outputFormat=table" target="_blank">Alleen huidige woonplaatsen</a></h3>
            <pre><code data-noescape data-trim>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix begrip: &lt;http://bag.basisregistraties.overheid.nl/id/begrip/&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?openbareRuimte ?woonplaats {
  ?openbareRuimte bag:bijbehorendeWoonplaats ?woonplaats;
                  bag:naamOpenbareRuimte "Hofstraat".
  ?woonplaats rdfs:label "Apeldoorn"@nl.
  <mark>filter not exists { ?woonplaats bag:status begrip:WoonplaatsIngetrokken. }</mark>
}
limit 100
              </code></pre>
            <p>Nu hebben we de juiste Apeldoorn.</p>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+begrip%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fid%2Fbegrip%2F%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fshape+%3Fbegin+%3Feind+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++filter+not+exists+%7B%0A++++%3Fwoonplaats+bag%3Astatus+begrip%3AWoonplaatsIngetrokken+.%0A++%7D%0A++%3Fnummeraanduiding+bag%3AbijbehorendeOpenbareRuimte+%3FopenbareRuimte+%3B%0A++++++++++++++++++++bag%3Ahuisnummer+110+.%0A++graph+%3Fvoorkomen+%7B%0A++++%3Fverblijfsobject+bag%3Ahoofdadres+%3Fnummeraanduiding+.%0A++%7D%0A++%3Fverblijfsobject+bag%3Apandrelatering%2Fbag%3AgeometriePand%2Fgeo%3AasWKT+%3Fshape+.%0A++%3Fvoorkomen+bag%3AbeginGeldigheid+%3Fbegin+.%0A++optional+%7B%0A++++%3Fvoorkomen+bag%3AeindGeldigheid+%3Feind+.%0A++%7D%0A%7D%0Alimit+100&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=BAG+voorkomen&headers=%7B%7D&outputFormat=table" target="_blank">BAG voorkomen</a></h3>
            <pre><code data-noescape data-trim>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix begrip: &lt;http://bag.basisregistraties.overheid.nl/id/begrip/&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?shape ?begin ?eind {
  ?openbareRuimte bag:bijbehorendeWoonplaats ?woonplaats;
                  bag:naamOpenbareRuimte "Hofstraat".
  ?woonplaats rdfs:label "Apeldoorn"@nl.
  filter not exists { ?woonplaats bag:status begrip:WoonplaatsIngetrokken. }
  ?nummeraanduiding bag:bijbehorendeOpenbareRuimte ?openbareRuimte;
                    bag:huisnummer 110.
  <mark>graph ?voorkomen { ?verblijfsobject bag:hoofdadres ?nummeraanduiding. }
  ?verblijfsobject bag:pandrelatering/bag:geometriePand/geo:asWKT ?shape.
  ?voorkomen bag:beginGeldigheid ?begin.
  optional { ?voorkomen bag:eindGeldigheid ?eind. }</mark>
}
limit 100
              </code></pre>
            <p class="size-80">
              <code>graph <URI> { A }</code> betekent: voer
              query <code>A</code> uit binnen
              deelgraaf <code>URI</code>.
            </p>
          </section>

          <section>
            <h3><a href="https://yasgui.org/#query=prefix+bag%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix+begrip%3A+%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fid%2Fbegrip%2F%3E%0Aprefix+geo%3A+%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect+%3Fshape+%3Fbegin+%7B%0A++%3FopenbareRuimte+bag%3AnaamOpenbareRuimte+%22Hofstraat%22+%3B%0A++++++++++++++++++bag%3AbijbehorendeWoonplaats+%3Fwoonplaats+.%0A++%3Fwoonplaats+rdfs%3Alabel+%22Apeldoorn%22%40nl+.%0A++filter+not+exists+%7B%0A++++%3Fwoonplaats+bag%3Astatus+begrip%3AWoonplaatsIngetrokken+.%0A++%7D%0A++%3Fnummeraanduiding+bag%3AbijbehorendeOpenbareRuimte+%3FopenbareRuimte+%3B%0A++++++++++++++++++++bag%3Ahuisnummer+110+.%0A++graph+%3Fvoorkomen+%7B%0A++++%3Fverblijfsobject+bag%3Ahoofdadres+%3Fnummeraanduiding+.%0A++%7D%0A++%3Fverblijfsobject+bag%3Apandrelatering%2Fbag%3AgeometriePand%2Fgeo%3AasWKT+%3Fshape+.%0A++%3Fvoorkomen+bag%3AbeginGeldigheid+%3Fbegin+.%0A++filter+not+exists+%7B%0A++++%3Fvoorkomen+bag%3AeindGeldigheid+%3Feind+.%0A++%7D%0A%7D%0Alimit+100%0A&contentTypeConstruct=text%2Fturtle&contentTypeSelect=application%2Fsparql-results%2Bjson&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=BAG+voorkomen&headers=%7B%7D&outputFormat=table" target="_blank">Huidig voorkomen</a></h3>
            <pre><code data-noescape data-trim>
prefix bag: &lt;http://bag.basisregistraties.overheid.nl/def/bag#&gt;
prefix begrip: &lt;http://bag.basisregistraties.overheid.nl/id/begrip/&gt;
prefix geo: &lt;http://www.opengis.net/ont/geosparql#&gt;
prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
select ?shape ?begin {
  ?openbareRuimte bag:naamOpenbareRuimte "Hofstraat";
                  bag:bijbehorendeWoonplaats ?woonplaats.
  ?woonplaats rdfs:label "Apeldoorn"@nl.
  filter not exists { ?woonplaats bag:status begrip:WoonplaatsIngetrokken. }
  ?nummeraanduiding bag:bijbehorendeOpenbareRuimte ?openbareRuimte;
                    bag:huisnummer 110.
  graph ?voorkomen { ?verblijfsobject bag:hoofdadres ?nummeraanduiding. }
  ?verblijfsobject bag:pandrelatering/bag:geometriePand/geo:asWKT ?shape.
  ?voorkomen bag:beginGeldigheid ?begin.
  <mark>filter not exists { ?voorkomen bag:eindGeldigheid ?eind. }</mark>
}
limit 100
              </code></pre>
          </section>
        </section>

        <section>
          <h2>Dank voor uw deelname!</h2>
          <ul>
            <li>PDOK endpoint: <a href="https://data.pdok.nl/sparql">https://data.pdok.nl/sparql</a></li>
            <li>Data stories: <a href="https://data.labs.pdok.nl/stories">https://data.labs.pdok.nl/stories</a></li>
            <li>Email: <a href="mailto:wouter@triply.cc">wouter@triply.cc</a></li>
            <li>Twitter: <a href="https://twitter/WGJBeek"><code>@WGJBeek</code></a></li>
          </ul>
          <br>
          <a href="https://kadaster.nl" target="_blank">
            <img src="/resource/img/logo/kadaster.png" height="150">
          </a>
          <a href="https://triply.cc" target="_blank">
            <img src="/resource/img/triply/logo.svg" height="150">
          </a>
        </section>

      </div>
    </div>
    <script src="/resource/reveal.js-3.7.0/lib/js/head.min.js"></script>
    <script src="/resource/reveal.js-3.7.0/js/reveal.js"></script>
    <script src="/resource/sparql.js"></script>
    <script>
			// More info https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'slide', // none/fade/slide/convex/concave/zoom
				// More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
          // Cross-browser shim that fully implements classList - https://github.com/eligrey/classList.js/
		      { src: '/resource/reveal.js-3.7.0/js/classList.js', condition: function() { return !document.body.classList; } },
		      // Interpret Markdown in <section> elements
		      { src: '/resource/reveal.js-3.7.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
		      { src: '/resource/reveal.js-3.7.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
		      // Syntax highlight for <code> elements
		      { src: '/resource/reveal.js-3.7.0/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
		      // Zoom in and out with Alt+click
		      { src: '/resource/reveal.js-3.7.0/plugin/zoom-js/zoom.js', async: true },
		      // Speaker notes
		      { src: '/resource/reveal.js-3.7.0/plugin/notes/notes.js', async: true },
		      // MathJax
		      { src: '/resource/reveal.js-3.7.0/plugin/math/math.js', async: true }
        ]
      });
    </script>
  </body>
</html>
